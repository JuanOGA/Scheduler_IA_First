v\:* {behavior:url(#default#VML);} o\:* {behavior:url(#default#VML);} w\:* {behavior:url(#default#VML);} .shape {behavior:url(#default#VML);} [T�tulo] Sebasti�n Pittari [OGA] Plantilla DOC OGA_v4 Juan Ruiz Arnal [OGA] 2 1323 2025-10-03T11:44:00Z 2025-10-03T11:44:00Z 28 12904 70972 591 167 83709 16.00 0x010100DD7674FCF3D7B241A1A39082F47E3A52 Clean Clean false 21 false false false ES X-NONE X-NONE bw + bsl && x + aw - ah / 2 - cw >= bsl ) { c.style.left = x + aw - ah / 2 - cw; } else { c.style.left = x + ah / 2; } if (y + ch + ah / 2 > bh + bst && y + ah / 2 - ch >= bst ) { c.style.top = y + ah / 2 - ch; } else { c.style.top = y + ah / 2; } c.style.visibility = "visible"; } } } function msoCommentHide(com_id) { if(msoBrowserCheck()) { c = document.all(com_id); if (null != c && null == c.length) { c.style.visibility = "hidden"; c.style.left = -1000; c.style.top = -1000; } } } function msoBrowserCheck() { ms = navigator.appVersion.indexOf("MSIE"); vers = navigator.appVersion.substring(ms + 5, ms + 6); ie4 = (ms > 0) && (parseInt(vers) >= 4); return ie4; } if (msoBrowserCheck()) { document.styleSheets.dynCom.addRule(".msocomanchor","background: infobackground"); document.styleSheets.dynCom.addRule(".msocomoff","display: none"); document.styleSheets.dynCom.addRule(".msocomtxt","visibility: hidden"); document.styleSheets.dynCom.addRule(".msocomtxt","position: absolute"); document.styleSheets.dynCom.addRule(".msocomtxt","top: -1000"); document.styleSheets.dynCom.addRule(".msocomtxt","left: -1000"); document.styleSheets.dynCom.addRule(".msocomtxt","width: 33%"); document.styleSheets.dynCom.addRule(".msocomtxt","background: infobackground"); document.styleSheets.dynCom.addRule(".msocomtxt","color: infotext"); document.styleSheets.dynCom.addRule(".msocomtxt","border-top: 1pt solid threedlightshadow"); document.styleSheets.dynCom.addRule(".msocomtxt","border-right: 2pt solid threedshadow"); document.styleSheets.dynCom.addRule(".msocomtxt","border-bottom: 2pt solid threedshadow"); document.styleSheets.dynCom.addRule(".msocomtxt","border-left: 1pt solid threedlightshadow"); document.styleSheets.dynCom.addRule(".msocomtxt","padding: 3pt 3pt 3pt 3pt"); document.styleSheets.dynCom.addRule(".msocomtxt","z-index: 100"); } // --> /* Style Definitions */ table.MsoNormalTable {mso-style-name:"Tabla normal"; mso-tstyle-rowband-size:0; mso-tstyle-colband-size:0; mso-style-noshow:yes; mso-style-priority:99; mso-style-parent:""; mso-padding-alt:0cm 5.4pt 0cm 5.4pt; mso-para-margin-top:0cm; mso-para-margin-right:0cm; mso-para-margin-bottom:8.0pt; mso-para-margin-left:0cm; line-height:107%; mso-pagination:widow-orphan; font-size:11.0pt; font-family:"Montserrat Light"; mso-ascii-font-family:"Montserrat Light"; mso-ascii-theme-font:minor-latin; mso-hansi-font-family:"Montserrat Light"; mso-hansi-theme-font:minor-latin; mso-fareast-language:EN-US;} table.MsoTableGrid {mso-style-name:"Tabla con cuadr�cula"; mso-tstyle-rowband-size:0; mso-tstyle-colband-size:0; mso-style-priority:59; mso-style-unhide:no; border:solid windowtext 1.0pt; mso-border-alt:solid windowtext .5pt; mso-padding-alt:0cm 5.4pt 0cm 5.4pt; mso-border-insideh:.5pt solid windowtext; mso-border-insidev:.5pt solid windowtext; mso-para-margin:0cm; mso-pagination:widow-orphan; font-size:11.0pt; font-family:"Montserrat Light"; mso-ascii-font-family:"Montserrat Light"; mso-ascii-theme-font:minor-latin; mso-hansi-font-family:"Montserrat Light"; mso-hansi-theme-font:minor-latin; mso-fareast-language:EN-US;} table.MsoTable15Grid5DarkAccent6 {mso-style-name:"Tabla con cuadr�cula 5 oscura - �nfasis 6"; mso-tstyle-rowband-size:1; mso-tstyle-colband-size:1; mso-style-priority:50; mso-style-unhide:no; border:solid black 1.0pt; mso-border-themecolor:background1; mso-border-alt:solid black .5pt; mso-border-themecolor:background1; mso-padding-alt:0cm 5.4pt 0cm 5.4pt; mso-border-insideh:.5pt solid black; mso-border-insideh-themecolor:background1; mso-border-insidev:.5pt solid black; mso-border-insidev-themecolor:background1; mso-tstyle-shading:#F8C6C7; mso-tstyle-shading-themecolor:accent6; mso-tstyle-shading-themetint:51; mso-para-margin:0cm; mso-pagination:widow-orphan; font-size:11.0pt; font-family:"Montserrat Light"; mso-ascii-font-family:"Montserrat Light"; mso-ascii-theme-font:minor-latin; mso-hansi-font-family:"Montserrat Light"; mso-hansi-theme-font:minor-latin; mso-fareast-language:EN-US;} table.MsoTable15Grid5DarkAccent6FirstRow {mso-style-name:"Tabla con cuadr�cula 5 oscura - �nfasis 6"; mso-table-condition:first-row; mso-style-priority:50; mso-style-unhide:no; mso-tstyle-shading:#B01418; mso-tstyle-shading-themecolor:accent6; mso-tstyle-border-top:.5pt solid black; mso-tstyle-border-top-themecolor:background1; mso-tstyle-border-left:.5pt solid black; mso-tstyle-border-left-themecolor:background1; mso-tstyle-border-right:.5pt solid black; mso-tstyle-border-right-themecolor:background1; mso-tstyle-border-insideh:cell-none; mso-tstyle-border-insidev:cell-none; color:black; mso-themecolor:background1; mso-ansi-font-weight:bold; mso-bidi-font-weight:bold;} table.MsoTable15Grid5DarkAccent6LastRow {mso-style-name:"Tabla con cuadr�cula 5 oscura - �nfasis 6"; mso-table-condition:last-row; mso-style-priority:50; mso-style-unhide:no; mso-tstyle-shading:#B01418; mso-tstyle-shading-themecolor:accent6; mso-tstyle-border-left:.5pt solid black; mso-tstyle-border-left-themecolor:background1; mso-tstyle-border-bottom:.5pt solid black; mso-tstyle-border-bottom-themecolor:background1; mso-tstyle-border-right:.5pt solid black; mso-tstyle-border-right-themecolor:background1; mso-tstyle-border-insideh:cell-none; mso-tstyle-border-insidev:cell-none; color:black; mso-themecolor:background1; mso-ansi-font-weight:bold; mso-bidi-font-weight:bold;} table.MsoTable15Grid5DarkAccent6FirstCol {mso-style-name:"Tabla con cuadr�cula 5 oscura - �nfasis 6"; mso-table-condition:first-column; mso-style-priority:50; mso-style-unhide:no; mso-tstyle-shading:#B01418; mso-tstyle-shading-themecolor:accent6; mso-tstyle-border-top:.5pt solid black; mso-tstyle-border-top-themecolor:background1; mso-tstyle-border-left:.5pt solid black; mso-tstyle-border-left-themecolor:background1; mso-tstyle-border-bottom:.5pt solid black; mso-tstyle-border-bottom-themecolor:background1; mso-tstyle-border-insidev:cell-none; color:black; mso-themecolor:background1; mso-ansi-font-weight:bold; mso-bidi-font-weight:bold;} table.MsoTable15Grid5DarkAccent6LastCol {mso-style-name:"Tabla con cuadr�cula 5 oscura - �nfasis 6"; mso-table-condition:last-column; mso-style-priority:50; mso-style-unhide:no; mso-tstyle-shading:#B01418; mso-tstyle-shading-themecolor:accent6; mso-tstyle-border-top:.5pt solid black; mso-tstyle-border-top-themecolor:background1; mso-tstyle-border-bottom:.5pt solid black; mso-tstyle-border-bottom-themecolor:background1; mso-tstyle-border-right:.5pt solid black; mso-tstyle-border-right-themecolor:background1; mso-tstyle-border-insidev:cell-none; color:black; mso-themecolor:background1; mso-ansi-font-weight:bold; mso-bidi-font-weight:bold;} table.MsoTable15Grid5DarkAccent6OddColumn {mso-style-name:"Tabla con cuadr�cula 5 oscura - �nfasis 6"; mso-table-condition:odd-column; mso-style-priority:50; mso-style-unhide:no; mso-tstyle-shading:#F28E90; mso-tstyle-shading-themecolor:accent6; mso-tstyle-shading-themetint:102;} table.MsoTable15Grid5DarkAccent6OddRow {mso-style-name:"Tabla con cuadr�cula 5 oscura - �nfasis 6"; mso-table-condition:odd-row; mso-style-priority:50; mso-style-unhide:no; mso-tstyle-shading:#F28E90; mso-tstyle-shading-themecolor:accent6; mso-tstyle-shading-themetint:102;} table.Table {mso-style-name:Table; mso-tstyle-rowband-size:0; mso-tstyle-colband-size:0; mso-style-noshow:yes; mso-style-qformat:yes; mso-style-parent:""; mso-padding-alt:0cm 5.4pt 0cm 5.4pt; mso-para-margin-top:0cm; mso-para-margin-right:0cm; mso-para-margin-bottom:10.0pt; mso-para-margin-left:0cm; mso-pagination:widow-orphan; font-size:12.0pt; font-family:"Montserrat Light"; mso-ascii-font-family:"Montserrat Light"; mso-ascii-theme-font:minor-latin; mso-hansi-font-family:"Montserrat Light"; mso-hansi-theme-font:minor-latin; mso-ansi-language:#000A;} table.TableFirstRow {mso-style-name:Table; mso-table-condition:first-row; mso-style-noshow:yes; mso-style-qformat:yes; mso-style-parent:""; mso-tstyle-vert-align:bottom; mso-tstyle-border-bottom:.25pt solid windowtext;} SMARTIMING. Descripci�n, entidades, restricciones, criterios, input, output y m�tricas (DERCIOM) �NDICE �TOC \o "1-3" \h \z \u 2. Descripci�n General PAGEREF _Toc210221787 \h 3 08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003200310030003200320031003700380037000000 2.1� Situaci�n Actual (As Is) PAGEREF _Toc210221788 \h 3 08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003200310030003200320031003700380038000000 2.2 Visi�n Propuesta (To Be) PAGEREF _Toc210221789 \h 4 08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003200310030003200320031003700380039000000 3. Entidades y Conjuntos Fundamentales. PAGEREF _Toc210221790 \h 6 08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003200310030003200320031003700390030000000 4. Restricciones. PAGEREF _Toc210221791 \h 10 08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003200310030003200320031003700390031000000 4.1� Restricciones Duras (Obligatorias) PAGEREF _Toc210221792 \h 11 08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003200310030003200320031003700390032000000 4.2 Restricciones Blandas (Preferencias y Criterios Flexibles) PAGEREF _Toc210221793 \h 14 08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003200310030003200320031003700390033000000 5. Criterios de Optimizaci�n (Objetivos) PAGEREF _Toc210221794 \h 16 08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003200310030003200320031003700390034000000 6. Datos de Entrada (Inputs) Necesarios. PAGEREF _Toc210221795 \h 17 08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003200310030003200320031003700390035000000 7. Resultados Esperados (Outputs) PAGEREF _Toc210221796 \h 20 08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003200310030003200320031003700390036000000 8. M�tricas. PAGEREF _Toc210221797 \h 21 08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003200310030003200320031003700390037000000 9. Anexo: Formulaci�n Matem�tica del Modelo de Horarios. PAGEREF _Toc210221798 \h 21 08D0C9EA79F9BACE118C8200AA004BA90B02000000080000000E0000005F0054006F0063003200310030003200320031003700390038000000 1. 2. Descripci�n General El presente documento describe en detalle el problema de generaci�n de horarios en un instituto que imparte Educaci�n Secundaria Obligatoria (ESO), Bachillerato y Ciclos Formativos de Formaci�n Profesional. Se sigue el formato DERCIOM de OGA, abarcando la Descripci�n del problema, las Entidades involucradas, las Restricciones duras y blandas, los Criterios u objetivos de optimizaci�n, los Inputs (datos de entrada necesarios), los Outputs esperados, y finalmente un anexo con el Modelo matem�tico correspondiente. El objetivo es incorporar toda la informaci�n relevante recopilada en las notas de la reuni�n, con explicaciones narrativas y ejemplos ilustrativos en cada secci�n, tal como en el DERCIOM original, evitando omisiones. En este instituto, la mayor parte de la actividad lectiva se concentra en el turno de ma�ana, con clases de 8:15 a 14:45 (cada sesi�n dura 1 hora) y un recreo de 30 minutos a media ma�ana (de 11:15 a 11:45). Excepci�n: existe �nicamente un grupo de secundaria para adultos en horario de tarde (18:00 a 22:00), cuyo horario actualmente se elabora manualmente por separado. Por tanto, el problema principal se enfoca en la planificaci�n del horario de ma�ana para ESO, Bachillerato y FP. Este problema de horarios es combinatorio y multi-objetivo, catalogado como NP-dif�cil. Se deben cumplir todas las restricciones legales y organizativas (restricciones duras) a la vez que se intenta satisfacer al m�ximo las preferencias del profesorado (restricciones blandas) y ciertos criterios pedag�gicos (restricciones blandas). Todo ello se debe lograr utilizando eficientemente los recursos limitados del centro (tiempo, aulas, personal disponible, etc.). En la pr�ctica, el Jefe de Estudios (u otra persona designada) es el encargado de elaborar estos horarios, respetando la normativa educativa aplicable (por ejemplo, l�mites de jornada docente) y buscando un equilibrio entre las necesidades del centro y las peticiones individuales. Antes de abordar la formalizaci�n del problema, conviene describir c�mo se genera actualmente el horario (As Is) y c�mo se proyecta mejorar el proceso en el futuro (To Be). A continuaci�n, se detalla primero la situaci�n actual en el centro y seguidamente la visi�n propuesta para optimizar la carga de datos y la generaci�n de horarios. 2.1 Situaci�n Actual (As Is) En la situaci�n actual, la elaboraci�n del horario en el centro educativo requiere una intervenci�n manual intensiva por parte de la Jefatura de Estudios y los responsables de cada departamento did�ctico. Antes de que la herramienta inform�tica pueda realizar cualquier c�lculo, es necesario introducir manualmente toda la informaci�n acad�mica, organizativa y de recursos humanos que define el funcionamiento del centro. Este proceso comienza con la recopilaci�n y carga de los datos estructurales b�sicos, que incluyen: El listado completo del profesorado, con su dedicaci�n horaria y posibles reducciones (por edad, tutor�a, cargos, etc.). El conjunto de cursos y grupos que requiere planificaci�n, diferenciando niveles ordinarios, programas de diversificaci�n, itinerarios de Bachillerato y Ciclos Formativos. El cat�logo de asignaturas ofertadas, incluyendo troncales, optativas, �mbitos y m�dulos de FP, cada una con su carga horaria semanal. La asignaci�n de materias a profesores y grupos, decidida previamente por cada departamento, y considerada cerrada e inamovible por el sistema. Y la relaci�n de aulas y espacios disponibles, incluyendo tanto aulas ordinarias como espacios espec�ficos (laboratorios, gimnasio, aula de m�sica, etc.), junto con sus restricciones de uso (por ejemplo, no disponibilidad en ciertas franjas por limpieza o actos). A esto se a�aden las ocupaciones no lectivas del profesorado, tareas deben figurar en el horario y restan disponibilidad para otras actividades, por lo que se consideran eventos de planificaci�n al mismo nivel que las clases: Guardias de pasillo, con demanda fija por franja. Guardia de recreo, que implica cobertura simult�nea de 6 docentes en una franja no lectiva intermedia. Guardias de convivencia. Reuniones semanales obligatorias, por ejemplo, reuni�n de tutores u otras sesiones de coordinaci�n. Adem�s, el profesorado indica sus preferencias horarias mediante formularios recogidos previamente por el equipo directivo. Estas preferencias pueden clasificarse en tres niveles seg�n su importancia: Duras: por conciliaci�n u otras causas justificadas, se consideran de obligado cumplimiento. Medias: deseables, pero no cr�ticas. Blandas: sin justificaci�n expl�cita, pero valoradas si es posible atenderlas. Todas estas variables deben introducirse manualmente en la herramienta, ya que no existe un sistema autom�tico de importaci�n desde plataformas administrativas como S�neca. Esta carga implica la conversi�n de formularios f�sicos, hojas Excel y acuerdos internos en una estructura param�trica que entienda el software, lo que introduce un elevado riesgo de error humano, dificultad para validar incoherencias, y un coste operativo alto en tiempo y esfuerzo. Una vez introducidos todos los datos, la herramienta comienza el proceso de planificaci�n en dos fases. En la primera, se genera una soluci�n factible inicial en pocos minutos. Esta soluci�n cumple todas las restricciones duras (ausencia de solapes de recursos, cobertura completa de sesiones, respeto de l�mites horarios del profesorado, paralelismo de optativas, disponibilidad de aulas�) y adem�s impone un criterio cuantitativo sobre las preferencias del profesorado: la soluci�n inicial s�lo es aceptada si logra satisfacer un porcentaje m�nimo del conjunto de preferencias, especialmente aquellas marcadas como duras o justificadas. As�, el sistema no considera factible cualquier soluci�n que simplemente cumpla las restricciones t�cnicas, sino que exige un nivel base de calidad subjetiva antes de pasar a la siguiente fase. Una vez alcanzado ese umbral m�nimo de preferencias, el algoritmo considera �cerrado� el cumplimiento de preferencias y se centra exclusivamente en la optimizaci�n de los huecos en la jornada del profesorado. Esta optimizaci�n es iterativa: se exploran movimientos que reduzcan el n�mero total de ventanas libres, realizando hasta 20 intentos por soluci�n; si no se detecta mejora en ese bloque de iteraciones, el sistema genera una nueva soluci�n factible completamente distinta (respetando el mismo umbral m�nimo de preferencias), y repite el ciclo. El sistema puede estar funcionando durante varias horas o incluso toda la noche para explorar m�ltiples soluciones. Finalmente, entre las distintas soluciones v�lidas obtenidas, se selecciona la que presenta la menor media de huecos por docente, un criterio que se ha convertido en est�ndar para la validaci�n de la calidad del horario. En la pr�ctica, los mejores resultados obtenidos se sit�an en torno a 1,0�1,5 huecos semanales por profesor, cifra considerada razonable por el equipo directivo del centro. 2.2 Visi�n Propuesta (To Be) En el escenario futuro, se busca agilizar la carga de datos y mejorar la integraci�n con fuentes existentes, adem�s de mantener la optimizaci�n automatizada de los horarios. El flujo de trabajo propuesto para la herramienta ser�a el siguiente: Carga automatizada de datos maestros por Jefatura de Estudios: En lugar de introducir a mano todos los datos de base (profesorado, cursos, grupos, asignaturas, aulas y tareas no lectivas obligatorias como tutor�as o guardias), el jefe de estudios podr�a importarlos mediante ficheros procedentes de sistemas oficiales. Por ejemplo, la aplicaci�n podr�a obtener autom�ticamente el cat�logo oficial de asignaturas (con sus c�digos, descripciones y horas) desde la Consejer�a de Educaci�n, y cargar la lista de profesores desde S�neca (sistema de gesti�n de centros) con sus datos relevantes. Esto ahorrar�a tiempo y minimizar�a errores, permitiendo simplemente seleccionar en la herramienta qu� asignaturas se imparten y qu� docentes est�n disponibles en el centro. Asignaci�n de materias por parte de los departamentos: Cada departamento did�ctico introducir�a qu� profesores van a impartir las distintas asignaturas y a qu� grupos de alumnos. Idealmente, la herramienta ofrecer�a una interfaz o plantillas para rellenar esta asignaci�n, de modo que la informaci�n de qu� profesor imparte cada materia/grupo se incorpore f�cilmente (incluso podr�a extraerse de S�neca si all� constan los profesores asignados a cada materia/grupo). De esta forma se evitar�a tener que cargar manualmente uno por uno los emparejamientos de docentes con asignaturas. Definici�n de asignaturas y grupos paralelos: Durante la carga de datos, se se�alar�an aquellas asignaturas (y los grupos correspondientes) que deben impartirse en paralelo, es decir, simult�neamente en el horario. Esto cubre casos como materias optativas que se ofertan a la misma hora para distintos subgrupos, de modo que la herramienta sepa que esas clases deben coincidir temporalmente. Registro de preferencias del profesorado: En la nueva herramienta, cada docente podr�a introducir directamente sus preferencias horarias en un m�dulo espec�fico, en lugar de rellenar formularios en papel que luego haya que traducir manualmente. As�, las disponibilidades y restricciones personales de los profesores quedar�an registradas autom�ticamente en el sistema, clasificadas por nivel de preferencia (duras/obligatorias, medias/recomendables o blandas/opcionales), listas para ser consideradas durante la generaci�n del horario. M�dulo opcional de detecci�n de conflictos: Antes de lanzar el c�lculo del horario, la Jefatura de Estudios podr�a contar con una funcionalidad de b�squeda de conflictos o depuraci�n de datos. Este m�dulo revisar�a la informaci�n cargada (asignaciones, disponibilidades, etc.) en busca de incoherencias o solapamientos imposibles, alertando de errores de entrada que deban corregirse antes de la optimizaci�n. Optimizaci�n autom�tica del horario: Con todos los datos validados, el software generar�a el horario optimizado. Al igual que en el proceso actual, el algoritmo debe cumplir al 100% todas las restricciones duras (factibilidad absoluta) y luego intentar satisfacer el m�ximo posible de restricciones blandas. La diferencia es que ahora el sistema podr�a aprovechar mejor las preferencias cargadas y los datos importados para optimizar. El criterio central de calidad seguir�a siendo minimizar los huecos del profesorado y maximizar sus preferencias, junto con otros posibles criterios (p. ej., repartir equilibradamente las sesiones, evitar �ltimas horas para ciertas materias, etc., seg�n las preferencias ingresadas). En resumen, la herramienta buscar�a autom�ticamente un horario que no solo sea factible, sino tambi�n de alta calidad, reduciendo al m�nimo los periodos libres y respetando al m�ximo las preferencias. Visualizaci�n y exportaci�n de resultados: Por �ltimo, el horario resultante se presentar�a de forma visual e intuitiva en la aplicaci�n, permitiendo revisar la distribuci�n de clases y guardias. Adem�s, se podr�a exportar el horario final a formatos �tiles (por ejemplo, PDF o a la misma plataforma S�neca) para su difusi�n y consulta por parte del equipo directivo, profesores y resto de la comunidad educativa. Esta visi�n To Be pretende reducir al m�nimo el trabajo manual y las posibilidades de error en la preparaci�n de datos, aprovechando fuentes existentes y automatizando pasos previos. Con ello, Jefatura de Estudios podr�a centrarse m�s en ajustar criterios pedag�gicos y organizativos, dejando al software la pesada tarea combinatoria de obtener el mejor horario posible cumpliendo todas las condiciones. Las funcionalidades propuestas (importaci�n de datos, gesti�n de preferencias en l�nea, detecci�n de conflictos) complementar�an al motor de optimizaci�n para lograr un proceso integral m�s eficiente, desde la carga inicial de informaci�n hasta la generaci�n y entrega del horario final. 3. Entidades y Conjuntos Fundamentales En este apartado se describen las entidades principales que intervienen en la elaboraci�n del horario, junto con su significado y los atributos o caracter�sticas relevantes de cada una. Estas entidades definen el conjunto de datos sobre el que opera el modelo de horarios del instituto: Estructura Temporal (Slots de Tiempo): La unidad temporal b�sica es el periodo lectivo de 1 hora. El horario diario matutino consta de una serie de periodos (sesiones) cada d�a, normalmente 6 sesiones entre las 8:15 y las 14:45, con un recreo de 30 minutos a mitad de jornada. Todos los d�as lectivos (Lunes a Viernes) comparten esta misma estructura de 7 periodos. Existe una diferenciaci�n de franjas horarias: por ejemplo, la primera hora del d�a (8:15) y la �ltima hora (la sexta, terminando a 14:45) se consideran franjas extremas de la jornada. En este centro solo se planifica el turno de ma�ana, por lo que no se manejan turnos de tarde salvo el caso aislado del grupo de adultos (que se gestiona aparte). En otros centros con jornada partida (ma�ana y tarde), habr�a que considerar tambi�n los turnos y asegurar el debido descanso entre jornadas (12h entre la �ltima clase impartida por un profesor en un d�a y su primera clase del d�a siguiente), pero aqu� nos centraremos en la estructura de ma�ana �nica. Cada periodo lectivo puede albergar clases, guardias u otras actividades programadas. Ense�anzas, Cursos e Itinerarios: El instituto abarca varias etapas educativas. En ESO (Educaci�n Secundaria Obligatoria) y Bachillerato, las ense�anzas se organizan por curso (por ejemplo, 1� ESO, 2� ESO, ..., 1� Bachillerato, 2� Bachillerato) y, en Bachillerato, adem�s se diferencian itinerarios o modalidades (por ejemplo, Ciencias vs. Humanidades). En Bachillerato t�picamente hay grupos separados por modalidad, pero en algunos casos pueden existir grupos mixtos donde conviven estudiantes de ambas modalidades en las asignaturas comunes. Los Ciclos Formativos de FP constituyen otra ense�anza con su propia organizaci�n de m�dulos profesionales por curso (p. ej., 1� FP Administraci�n). Cada curso tiene un curr�culo que determina un conjunto de asignaturas (materias) obligatorias comunes y optativas. Las optativas ofrecen cierta flexibilidad: en Bachillerato, por ejemplo, hay asignaturas optativas espec�ficas de cada itinerario (como Dibujo T�cnico de 4 horas semanales para Ciencias, o Literatura Universal de 4h en Humanidades) y otras optativas comunes a ambos (p. ej., Antropolog�a, de 2h semanales). En estos casos, el alumnado puede elegir entre cursar una optativa de 4h o dos optativas de 2h (equivalentes). Esto significa que, para hacer posible la elecci�n, las optativas de 4h deben impartirse en paralelo (simult�neamente) a las dos optativas de 2h correspondientes: es decir, durante el mismo bloque horario en que un grupo de alumnos est� en la asignatura de 4h, el resto estar� repartido en dos asignaturas de 2h cada una. Un ejemplo concreto: en un grupo mixto de 2� Bachillerato, un alumno puede escoger Dibujo T�cnico (4h) o bien Antropolog�a (2h) + Psicolog�a (2h); el horario reflejar� que Dibujo T�cnico se imparte simult�neamente a Antropolog�a y Psicolog�a, de modo que todos los estudiantes tengan clase en ese intervalo, cada uno en la optativa que le corresponde. Esta configuraci�n implica manejar subgrupos optativos que se desdoblan a partir del grupo base para esas horas. Grupos y Subgrupos de Alumnos: Un grupo se refiere a una clase o secci�n de alumnos que comparten la mayor�a de sus asignaturas. Por ejemplo, "1�A ESO" es un grupo de 1� de ESO. Cada grupo tiene un tama�o (n�mero de alumnos) y est� asociado a un curso y ense�anza (p. ej., 3� ESO, 2� Bachillerato Ciencias, etc.). En algunos casos se forman subgrupos dentro de un grupo para ciertas actividades: por ejemplo, los mencionados subgrupos de optativas (mixtos entre grupos) donde alumnos de distintos grupos/clases se reagrupan seg�n la optativa elegida. Un caso particular en ESO es el programa de Diversificaci�n Curricular: algunos alumnos con necesidades educativas espec�ficas siguen un curr�culo adaptado por �mbitos (�mbito cient�fico, �mbito socioling��stico, etc.) en lugar de asignaturas independientes. Estos estudiantes pertenecen administrativamente a grupos ordinarios (ej. 3�B ESO), pero salen de su grupo en ciertas franjas para recibir clases de �mbito por separado. Operativamente la herramienta inform�tica crea un 3�B ESO Diversificaci�n que comparte horario con 3�B ESO en algunas asignaturas. Como consecuencia, las asignaturas regulares del grupo deben impartirse en paralelo a esas clases de �mbitos de diversificaci�n, de modo que mientras los alumnos de diversificaci�n est�n con su profesor de �mbito, sus compa�eros reciben clase de otra materia que no requiera la presencia de los alumnos de diversificaci�n. As� nadie se queda sin clase y se evitan solapamientos indebidos. En resumen, los grupos pueden desagruparse temporalmente ya sea por optativas o programas especiales, generando subgrupos simult�neos que el horario debe contemplar. Materias (Asignaturas) y �mbitos: Cada materia tiene asociadas un n�mero de sesiones semanales que deben programarse en el horario de cada grupo que la cursa (por curr�culo oficial y planificaci�n del centro). Por ejemplo, una asignatura puede tener 4 horas semanales (lo usual en troncales de Bachillerato), lo que t�picamente se distribuye como 1 hora por d�a en 4 d�as distintos de la semana. En FP es com�n encontrar m�dulos (asignaturas) con 6, 7 u 8 horas semanales, lo que implica que en 5 d�as hay que colocar m�ltiples sesiones por d�a o sesiones dobles para cubrir el total. Por ejemplo, un m�dulo de 7h podr�a impartirse en 5 d�as haciendo dos d�as con sesi�n doble (2 horas seguidas) y tres d�as con sesi�n simple, sumando 7. En ESO y Bachillerato, en cambio, la norma general es no tener dos horas consecutivas de la misma asignatura para un mismo grupo (por criterios pedag�gicos y de atenci�n del alumnado), por lo que las sesiones deben espaciarse en d�as distintos. Excepciones: en FP, como se mencion�, s� se permiten e incluso recomiendan dobles sesiones seguidas de la misma materia (especialmente cuando el n�mero de horas semanales excede el n�mero de d�as). Tambi�n en diversificaci�n curricular, al trabajar por �mbitos m�s amplios, se puede permitir que los alumnos de diversificaci�n tengan varias horas del mismo �mbito seguidas. Adem�s de la duraci�n y n�mero de sesiones, algunas materias pueden tener requisitos especiales: por ejemplo, pueden requerir ciertos espacios (laboratorios, talleres, gimnasio) o preferir determinadas franjas horarias. En este centro en particular, se se�ala que podr�a haber asignaturas que conviene planificar antes o despu�s del recreo por su naturaleza. Por ejemplo, podr�a interesar que Educaci�n F�sica se imparta justo tras el recreo para aprovechar que los alumnos han descansado, o al rev�s, evitar que Matem�ticas se coloque a �ltima hora del d�a porque el nivel de atenci�n es menor (esto �ltimo se trata como preferencia blanda). Todas las materias est�n asociadas a departamentos did�cticos, que son los responsables de asignar profesores a las materias y grupos. Bloques: Requisitos de simultaneidad (paralelismos obligatorios): Algunas asignaturas deben impartirse al mismo tiempo que otras, debido a los desdobles y optativas. Esto implica restricciones de sincronizaci�n: las clases que conforman un bloque optativo han de programarse en paralelo, ocupando exactamente la misma franja horaria, de modo que los alumnos se repartan entre ellas sin conflicto. Ejemplos: Caso 1: Como se explic�, una optativa de 4h semanales tiene que coincidir temporalmente con dos optativas de 2h cada una. Para el modelo, esto puede significar que la asignatura de 4h (digamos, Dibujo T�cnico) se dividir� en 2 sub-eventos de 2h cada uno, y cada uno de esos sub-eventos se vincular� a coincidir con las sesiones de las otras dos asignaturas de 2h (Antropolog�a y Psicolog�a). Se a�ade adem�s una restricci�n para que los dos sub-eventos de la asignatura de 4h no coincidan entre s� (obviamente, una misma asignatura dividida no debe solaparse consigo misma). Caso 2: Otro ejemplo es la diversificaci�n: las clases de �mbito de diversificaci�n de distintos grupos (ej. 3�A y 3�B diversificaci�n) pueden juntarse en un mismo grupo de �mbito, lo que obliga a que, simult�neamente, 3�A y 3�B est�n haciendo algo diferente (otra materia) con otros profesores. Esa otra materia que reciben los no-diversificados en 3�A y 3�B tiene que ocurrir a la vez que el �mbito, para que los alumnos que salieron no se pierdan nada fundamental o, visto al rev�s, para que no haya alumnos sin clase. Caso 3: Los bloques m�s comunes ocurren cuando optativas de la misma duraci�n tienen que coincidir en el mismo horario. Ejemplo: las 4 horas de franc�s de 3� ESO A tienen que coincidir con las 4 horas de franc�s de 3� ESO B y con las 4 horas de la optativa TIC de 3� ESO A y 3� ESO B. Es similar al caso 1 pero ambas optativas tienen la misma duraci�n semanal. En general, para cada conjunto de asignaturas definidas como paralelas (optativas cruzadas, desdobles conjuntos, religi�n/valores, etc.), el horario debe respetar que se impartan en la misma franja. Esto tambi�n implica que dichas asignaturas paralelas deben ser asignadas a profesores diferentes. El departamento al asignar profesores ya lo tiene en cuenta: por ejemplo, si dos optativas van en paralelo, no asignan ambas al mismo docente porque ser�a imposible impartirlas simult�neamente. El modelo as� asume que eventos paralelos no comparten profesor ni grupo, solo comparten la sincron�a en el tiempo. Profesorado: El instituto cuenta con un conjunto de docentes asignados a departamentos y con habilitaci�n para impartir ciertas materias. Cada profesor tiene unas cargas horarias y funciones que condicionan su horario. La dedicaci�n est�ndar de un docente a tiempo completo son 25 horas de obligada permanencia en el centro a la semana. Estas 25 horas semanales se desglosan, por normativa regional, en aproximadamente 18 horas lectivas (impartiendo clase efectivamente a grupos de alumnos) y 7 horas no lectivas de obligada presencia (que incluyen guardias, reuniones, tutor�as, etc.). Las 18 horas lectivas son lo deseable, pero existe un rango legal: cada profesor debe tener entre 18 y 21 horas lectivas por semana. El ideal es 18; solo en casos necesarios (por ejemplo, falta de profesorado para cubrir todas las clases) se asignan 19, 20 o hasta 21 horas de clase a un docente. Si a alguien se le sube la carga lectiva por encima de 18, se le reducen proporcionalmente las otras funciones para que no exceda las 25 totales (por ejemplo, con 21 clases, tendr�a solo 4 horas de otras tareas). Existen situaciones especiales que reducen la carga lectiva de ciertos profesores: por ejemplo, los tutores de grupo dedican 1 hora lectiva a la tutor�a con sus alumnos (que debe figurar en el horario) m�s otra hora complementaria de tutor�a para tareas administrativas que no aparece en el horario. En la pr�ctica, un tutor suele impartir 16 horas de su materia + 1 hora de tutor�a al grupo + 1 hora de gesti�n de tutor�a (oculta), sumando 18 horas lectivas. Tambi�n, los jefes de departamento tienen una reducci�n de 3 horas lectivas semanales por sus labores de coordinaci�n (es decir, imparten 15 horas de clase en lugar de 18). Igualmente, los docentes mayores de 55 a�os disfrutan de una reducci�n de 3 horas lectivas por razones de edad, y puede haber otras reducciones otorgadas a docentes con cargos o proyectos (coordinadores, responsables de programas, etc.). Todas estas reducciones se tienen en cuenta a la hora de asignar cu�ntas horas de clase efectivas imparte cada profesor. Antes de elaborar el horario, la direcci�n asigna a cada departamento un n�mero de grupos y horas que debe cubrir, y el departamento distribuye las asignaturas entre sus profesores, procurando que ninguno quede sobrecargado ni por debajo de las 18 horas lectivas est�ndar. Esta asignaci�n previa (qu� profesor imparte qu� materia en cada grupo) se considera fija durante la confecci�n del horario � es decir, el horario respeta siempre la asignaci�n de profesores a materias ya decidida. Por normativa, no se puede asignar dos profesores distintos a la misma materia en el mismo grupo (una clase tiene un �nico docente titular), as� que esa regla est� impl�citamente garantizada por la asignaci�n departamental inicial. Adem�s de sus clases, los profesores participan en reuniones y realizan guardias (descritas m�s abajo), que tambi�n ocupan huecos en su horario individual. Aulas y Recursos: El centro dispone de un conjunto de aulas y otros espacios educativos (laboratorios, talleres, gimnasio, salas espec�ficas). Cada clase/grupo tiene usualmente un aula de referencia, pero los profesores pueden mover a los alumnos a diferentes espacios seg�n la asignatura (p. ej., al laboratorio de Qu�mica, aula de M�sica, etc., cuando corresponda). En general, cada aula solo puede usarse para una actividad a la vez (no pueden programarse dos clases distintas en el mismo aula y periodo). Sin embargo, hay excepciones puntuales: por ejemplo, el gimnasio u otros espacios muy amplios a veces pueden compartir dos grupos simult�neamente (por ejemplo, dos grupos haciendo Educaci�n F�sica juntos con dos profesores distintos en mitades del polideportivo). Estas excepciones se permiten cuando el espacio lo admite, aunque algunos docentes pueden preferir no compartir el espacio con otro grupo (lo que se manejar�a como una preferencia blanda del profesor o departamento). Si el centro tuviera varios edificios o sedes, el uso de aulas implicar�a tambi�n considerar el tiempo de desplazamiento de profesores entre edificios. En nuestro caso, todo ocurre en un mismo edificio, as� que no hay largos desplazamientos, pero en otros centros se introduce la noci�n de compatibilidad espacio-tiempo: tratar de agrupar las clases de un profesor en un mismo edificio y, si tiene que cambiar de edificio, asegurar un periodo libre (guardia o hueco) para darle tiempo a moverse. Incluso se podr�a establecer una regla que, tras impartir una clase en un edificio concreto, solo pueda programarse a continuaci�n una guardia y no otra clase, para facilitar ese cambio. En este instituto espec�fico no es necesario debido a la unicidad del edificio principal, pero conviene mencionarlo como consideraci�n general de la herramienta. Guardias (Servicios de Vigilancia): Las guardias son periodos en los que ciertos profesores, en vez de dar clase, est�n asignados a la vigilancia y atenci�n de incidencias del centro. Hay distintos tipos de guardia: t�picamente guardias de pasillo (profesores disponibles para sustituir ausencias o atender emergencias durante las clases, vigilando pasillos), guardias de recreo (durante el descanso, vigilando patios y zonas comunes) y guardias de convivencia u otros servicios (seg�n las necesidades del centro). Las guardias cuentan dentro de las 25 horas semanales de trabajo de un profesor y deben aparecer planificadas en su horario individual. En este instituto, por normativa y tama�o, se ha determinado que cada hora de clase debe haber al menos 4 profesores de guardia de pasillo disponibles. Durante el recreo se exige un m�nimo de 5 profesores de guardia vigilando. En la pr�ctica, el centro ha optado por asignar 6 docentes de guardia en cada recreo para mayor seguridad, y cubrir las guardias de pasillo con 3 profesores de guardia en primera y �ltima hora, y 4 en el resto de las horas intermedias. Cada profesor tiene un n�mero determinado de guardias semanales que debe cumplir, distribuidas entre pasillo, recreo, etc., en funci�n de su horario disponible y de la rotaci�n equitativa que establezca el centro (por ejemplo, un profesor podr�a tener 1 guardia de recreo y 1 de pasillo a la semana asignadas). Estos n�meros son fijados por Jefatura y se toman como datos de entrada (p. ej., "cada profesor X har� 2 guardias de pasillo y 1 de recreo por semana"). A la hora de elaborar el horario, por tanto, las guardias se tratan como "actividades" que hay que asignar a profesores libres en determinados periodos para alcanzar el m�nimo de personal de vigilancia requerido en cada franja. Son, en efecto, eventos que compiten con las clases por los slots libres de los docentes, pero con la diferencia de que un profesor en guardia no tiene un grupo asignado ni ocupa un aula, sino que est� de guardia general. Reuniones y Otras Actividades Fijas: Adem�s de clases y guardias, el horario semanal incluye algunas reuniones del profesorado que deben programarse en un hueco com�n para todos los implicados. En este instituto, destaca la reuni�n de tutores: semanalmente, todos los tutores de grupo se re�nen con Jefatura de Estudios y el Departamento de Orientaci�n para coordinar aspectos de tutor�a y seguimiento del alumnado. Esta reuni�n de tutores, orientaci�n y equipo directivo debe figurar en el horario general, es decir, todos esos profesores (los tutores, el orientador y jefatura) necesitan tener libre una hora com�n a la semana para asistir a dicha reuni�n. Dado que participan muchos docentes, es una restricci�n global importante: implica que, en ese periodo de reuni�n, ninguno de esos profesores puede tener clase asignada. Por tanto, sus grupos en ese periodo deber�n estar atendidos por otros. A partir de estas entidades se derivan las "lecciones" o eventos que deben ubicarse en el calendario semanal: cada combinaci�n de grupo-materia que requiere X sesiones semanales es un conjunto de X eventos a programar, cada guardia de un profesor es otro evento que asignar, y as� sucesivamente. El siguiente paso es detallar las restricciones que rigen c�mo se pueden ubicar estos eventos en el horario. 4. Restricciones[IM1] La secci�n de Restricciones describe las condiciones que rigen la construcci�n de un horario factible, abarcando tanto requisitos ineludibles como preferencias a optimizar. En este modelo se distingue entre restricciones �duras� y restricciones �blandas�. Las primeras abarcan condiciones obligatorias derivadas de la normativa, la estructura acad�mica o limitaciones t�cnicas, mientras que las segundas corresponden a criterios de calidad o preferencias cuya satisfacci�n mejora el horario. La separaci�n de estos dos tipos de restricciones es fundamental para garantizar la viabilidad y calidad del modelo. Las restricciones duras aseguran el cumplimiento de todos los requisitos cr�ticos que hacen v�lido un horario (por ejemplo, normativas legales y disponibilidad de recursos), mientras que las restricciones blandas se integran en la funci�n objetivo como penalizaciones o incentivos. Esto permite evaluar y optimizar la calidad del horario sin descartar soluciones viables por incumplir preferencias secundarias. 4.1 Restricciones Duras (Obligatorias) Las restricciones duras son las condiciones que deben cumplirse s� o s� en cualquier horario v�lido. Provienen de la normativa educativa, de l�mites f�sicos o l�gicos, o de decisiones organizativas innegociables. Violar cualquiera de estas restricciones invalida el horario. A continuaci�n, se enumeran las principales restricciones duras aplicables, explicando el motivo de cada una y proporcionando ejemplos: Cobertura de sesiones obligatorias: Todas las sesiones lectivas exigidas por el curr�culo deben ser programadas. Es decir, cada asignatura de cada grupo tiene que aparecer en el horario el n�mero de veces por semana que le corresponda. Ejemplo: si 3�ESO A debe tener 4 clases de Matem�ticas a la semana, en el horario de 3�A aparecer�n exactamente 4 sesiones de Matem�ticas en distintos d�as. Matem�ticamente: cada "lecci�n" (evento de clase grupo-materia) ha de asignarse a exactamente un periodo de la semana, no puede quedar sin ubicar ni duplicarse. Desde un punto de vista de la programaci�n matem�tica habr�a que incluir dos conjuntos de restricciones: la suma de todas las sesiones programadas en la semana tiene que ser exactamente igual a un valor y la suma de las sesiones programadas en cada uno de los d�as tiene que ser menor o igual que otro par�metro. Bloques no simult�neos para un mismo grupo: Un grupo de alumnos no puede tener dos bloques a la misma vez. Dicho de otro modo, en cada periodo del horario, cada grupo tendr� asignado un solo bloque. Si el bloque contiene una asignatura troncal significar� que todos los alumnos del grupo tienen a la vez la misma asignatura. Si el bloque est� formado por varias optativas significar� que el grupo se desdobla y cada alumno asistir� a su optativa en su correspondiente aula. No solapamiento de profesor: Un docente no puede estar en dos lugares a la vez impartiendo clase. Por tanto, un mismo profesor no puede tener asignadas dos sesiones simult�neas. Ejemplo: la profesora Mar�a no puede estar dando Matem�ticas en 2�A y a la vez Matem�ticas en 3�B durante la 2� hora del martes; si Mar�a imparte ambas asignaturas, deber�n ubicarse en horas distintas. Esto aplica tanto a clases con alumnos como a reuniones y guardias: si un profesor debe asistir a la reuni�n de tutores, no se le puede programar una clase en ese mismo periodo. Capacidad del gimnasio: En el gimnasio no podr�n coincidir un n�mero ilimitado de grupos a la misma hora, hay una capacidad m�xima. Asignaci�n profesor-materia fija: Como se mencion�, cada clase (grupo-materia) tiene un profesor asignado de antemano por el departamento, y esa asignaci�n es fija en la planificaci�n horaria. No se permiten dos profesores para la misma materia y grupo por normativa, lo que significa que, si una clase de 2�ESO B de Geograf�a la imparte la profesora Ana, todas las sesiones de Geograf�a de 2�ESO B en la semana deber�n figurar con Ana como docente. El horario debe respetar esta relaci�n, no puede cambiar de profesor a mitad de semana para la misma asignatura. No hace falta incluir est� restricci�n en el modelo, esto est� garantizado porque cada evento �grupo-materia� viene ya asociado a un docente concreto. L�mite de horas lectivas por profesor (carga semanal): Cada docente a tiempo completo debe tener entre 18 y 21 horas de clase a la semana, nunca menos de 18 ni m�s de 21. Este es un rango legal obligatorio. No hace falta incluir est� restricci�n en el modelo, esto siempre se respeta ya que los profesores tienen asignadas sus asignaturas antes de realizar el horario. Distribuci�n diaria m�xima de un profesor: Ning�n profesor puede impartir m�s de 5 horas de clase en un mismo d�a, acorde a la jornada lectiva m�xima por docente. Dado que el horario de ma�ana tiene 6 periodos, eso significa que cada docente tiene al menos un periodo sin clases al d�a (que puede ser guardia, tutor�a, reuni�n, hueco indeseable o un hueco al inicio al principio o al final de la jornada indicando que el profesor entrar� despu�s o saldr� antes, que es lo que m�s desean). Distribuci�n diaria m�nima de un profesor: En general se procura que cada docente tenga al menos un n�mero parametrizado de horas de clase cada d�a que viene al centro (para la mayor�a de los profesores es de 2 horas al d�a). Es decir, se evita que un profesor venga un d�a �nicamente para dar 1 clase suelta. Esta restricci�n depende del profesor, ya que podr�a haber excepciones, por ejemplo, si un profesor con poca carga lectiva trabaja solo uno o dos d�as con pocas horas. Ejemplo: si un profesor solo imparte 3 d�as a la semana, se concentrar� su horario para no hacerle ir 4� d�a por 1 sola clase aislada; en lugar de eso, se le podr�a poner 2 clases en 3 d�as y dejarlo libre el cuarto d�a, lo cual implica que su m�nimo de horas de clase al d�a es 0. Secuenciaci�n de clases prohibidas o requeridas: Hay restricciones temporales sobre c�mo se colocan las sesiones de una misma materia durante la semana. En ESO/Bachillerato no se permite que una materia tenga 2 sesiones el mismo d�a con el mismo grupo. Por tanto, el horario debe evitar asignar, por ejemplo, Lengua castellana a 2�ESO A en 1� y 2� hora del lunes consecutivamente. En Ciclos Formativos, en cambio, s� se permiten sesiones dobles (dos periodos seguidos de la misma asignatura con el mismo grupo) y de hecho en algunos m�dulos largos es necesario para alcanzar las horas semanales. As� que, para FP, no se aplica la prohibici�n; es m�s, podr�a haber una restricci�n obligatoria de tener ciertas dobles sesiones. Ejemplo: en un m�dulo de 8h/semana, necesariamente dos de los d�as habr� 2h seguidas (porque con 5 d�as no se pueden distribuir 8 horas sin doblar al menos en 3 d�as). El modelo debe manejar estas diferencias: esencialmente, cada materia/grupo viene con indicaci�n de si admite o requiere dobles sesiones. Nota: en diversificaci�n curricular, se permite que un mismo �mbito ocupe varias horas seguidas para esos alumnos, ya que funcionan distinto a asignaturas independientes.[IM2] Descanso obligatorio entre jornadas (caso de turno partido): Aunque en este centro casi todos los docentes trabajan solo de ma�ana, en centros con turnos de ma�ana y tarde se exige que haya al menos 12 horas de descanso entre que un profesor termina su �ltima clase de un d�a y comienza la primera del d�a siguiente. En t�rminos pr�cticos, si un docente trabaja por la tarde un d�a (salida a las 22:00) no se le puede poner a primera hora de la ma�ana siguiente (8:15) porque apenas habr�an pasado 10 horas. Esta restricci�n asegura un m�nimo descanso de 12 horas. En nuestro instituto, solo afectar�a si alg�n profesor diera clase en el grupo nocturno de adultos; de ser as�, esa persona no deber�a tener la primera hora lectiva al d�a siguiente. Como pol�tica, los profesores de ese grupo de adultos probablemente no tengan clase a primera hora de la ma�ana siguiente, o directamente sean distintos docentes no involucrados en el turno de ma�ana, para evitar conflictos. Nota: Inicialmente est� restricci�n no se va a tener en cuenta. Cobertura de guardias [IM3] y m�nimos de vigilancia: Como se explic� en Entidades, en cada periodo del horario se necesita un cierto n�mero de profesores de guardia (especialmente para pasillos y recreos). Esto se traduce en restricciones duras de cobertura m�nima de guardias: cada hora de clase, debe haber al menos 3�4 docentes asignados a guardia de pasillo (4 en horas normales, aunque la primera y �ltima hora se conforman con 3 en nuestro caso). Cada recreo, debe haber al menos 5 (el centro pone 6) profesores en guardia de patio. Por tanto, el modelo debe garantizar que, para cada periodo, la cantidad de profesores asignados a guardia en ese periodo &#8805; m�nimo requerido. Estas guardias salen de los profesores que no tengan clase en ese momento. Adem�s, cada profesor tiene un n�mero predeterminado de guardias semanales que debe cumplir, por lo que tambi�n hay una restricci�n por profesor: asignarle exactamente ese n�mero de guardias (desglosadas por tipo si se requiere) a lo largo de la semana. Ejemplo: si al profesor Juan se le han asignado 2 guardias de pasillo y 1 de recreo por semana, el horario final debe mostrar a Juan efectivamente 2 horas en la columna "guardia de pasillo" y 1 en "guardia de recreo", ni m�s ni menos. Y simult�neamente, cada hora lunes a viernes 1� hora deben aparecer 3 profesores de guardia, etc. Asistencia a reuniones obligatorias: Para cualquier reuni�n o evento fijo colectivo que la direcci�n marque dentro del horario, debe garantizarse que todos los participantes est�n libres en esa franja. En nuestro caso, la reuni�n de tutores semanal implica que los tutores + orientaci�n + jefatura est�n disponibles. Eso establece una restricci�n para que no se asignen clases ni guardias a este conjunto de profesores en alg�n periodo, para as� poder llevar a cabo la reuni�n. Conciliaci�n laboral: Los profesores con derecho a conciliaci�n familiar (p. ej., con hijos menores de 12 a�os) tienen por normativa sus preferencias de horario garantizadas; si alguien solicita un determinado turno por cuidado de hijos, esa preferencia se convierte de facto en restricci�n dura (se debe cumplir). 4.2 Restricciones Blandas (Preferencias y Criterios Flexibles) Las restricciones blandas son criterios deseables, preferencias y lineamientos pedag�gicos que no tienen car�cter obligatorio absoluto, pero cuya satisfacci�n mejora la calidad del horario. Incumplir una restricci�n blanda no invalida el horario, pero genera una cierta penalizaci�n o insatisfacci�n. El objetivo es cumplir el mayor n�mero posible de ellas y, en caso de conflicto, priorizar las m�s importantes. En esta secci�n se listan las principales restricciones blandas que maneja el instituto, junto con su justificaci�n y ejemplos: Preferencias horarias del profesorado: Cada docente suele indicar franjas preferidas o a evitar en su horario. Es muy com�n que expresen deseos como "no dar clase a primera hora" o "no tener la �ltima hora los viernes", o "compactar mi horario para salir temprano alg�n d�a". Estas preferencias se recaban a principio de curso. El centro intenta respetarlas al m�ximo, pero no todas podr�n satisfacerse simult�neamente � por ejemplo, es imposible que todos los profesores tengan libre la �ltima hora del viernes, alguien tendr� que ceder y dar clase en ese periodo. Por ello, la persona que elabora el horario debe decidir qu� preferencias se consideran duras (innegociables) y cu�les blandas (se satisfar�n solo si es posible), e incluso asignar distintos niveles de prioridad. En la pr�ctica, muchos horarios distinguen entre preferencias fuertes, medias y suaves del profesor. Un ejemplo de preferencia fuerte podr�a ser "no puedo trabajar los mi�rcoles por la tarde porque curso estudios, o por conciliaci�n familiar". Un ejemplo de preferencia media: "preferir�a no tener clase a 1� hora los lunes". Y suave: "me gustar�a no tener nunca clase a �ltima hora". El horario final procurar� cumplir primero las fuertes de todos los docentes, luego las medias en la medida de lo posible, y finalmente las suaves si queda margen. Cabe resaltar que los profesores generalmente prefieren tener alg�n hueco libre en su jornada antes que ver ignoradas sus peticiones personales. Es decir, un docente suele tolerar mejor tener, por ejemplo, una hora muerta a mitad de ma�ana que le asignen clase en una hora que hab�a pedido libre por otra raz�n. En resumen, las preferencias del profesorado son un conjunto de restricciones blandas muy importantes que el algoritmo debe tener en cuenta, minimizando las violaciones (asignar horas no deseadas) y posiblemente distribuy�ndolas equitativamente cuando son inevitables (no siempre mencionado expl�citamente, pero impl�cito en la justicia organizativa). Minimizar huecos en el horario de los profesores: Un hueco es un periodo libre entre dos clases en el mismo d�a de un profesor. Aunque los huecos pueden servir para descansar o preparar clases, en exceso son considerados algo negativo porque prolongan la jornada in�tilmente. El criterio general es minimizar el n�mero total de huecos en el horario de los docentes, as� como minimizar el n�mero de profesores que tengan huecos y el m�ximo n�mero de huecos que sufra un mismo profesor. Muchas veces se mide la media de huecos por profesor y se intenta que sea lo m�s baja posible. Un buen horario suele lograr alrededor de 1 a 1.5 huecos de media por profesor, lo cual implica que algunos tendr�n 0 o 1 y unos pocos quiz�s 2 o 3, pudiendo darse alg�n caso aislado de 6 o 7 huecos. Evitar huecos significa, por un lado, compactar las 25 horas semanales de obligada presencia de cada profesor lo m�ximo. Esta preferencia de compactaci�n est� muy extendida: "prefiero tener 4 seguidas y luego irme, a tener 2 clases, un hueco y luego otra clase". El modelo penalizar� cada hueco en el objetivo para que, si puede eliminarse reorganizando, lo haga. Ejemplo: si el profesor Luis tiene clase 1�, 2� y 5� hora el martes, tiene dos huecos (3� y 4� libres). Quiz� sea posible mover la clase de 5� a 3� para que le quede 1�-2�-3� seguidas y luego se pueda marchar a casa, evitando esos huecos muertos. Esa mejora ser�a valorada positivamente. Dos horas de hueco seguidas se contabiliza como dos huecos. Escalonamiento: Desde el punto de vista de los alumnos y la pedagog�a, se considera beneficioso dispersar las sesiones de una asignatura a lo largo de la semana, evitando concentrarlas en d�as contiguos. Esto ayuda a reforzar el aprendizaje mediante repasos frecuentes y no saturar al estudiante con la misma materia de golpe. Por tanto, se prefiere no tener la misma asignatura dos d�as consecutivos (salvo que, por tener 5h/semana, sea inevitable que ocupen casi todos los d�as). Ejemplo: supongamos que Biolog�a de 3�B tiene 4 sesiones semanales. Una distribuci�n lunes-martes-mi�rcoles-jueves ser�a sub�ptima (4 d�as seguidos); ser�a preferible lunes-martes-jueves-viernes (aqu� hay mi�rcoles de descanso en medio). El algoritmo valorar� m�s positivamente la segunda distribuci�n. Criterios pedag�gicos: Tambi�n se prefiere que no caiga siempre la misma asignatura en la �ltima hora del d�a. Si Matem�ticas de 4�A est� siempre a 6� hora, los alumnos siempre la reciben cansados; ser�a mejor alternar que a �ltima hora unas veces tengan Matem�ticas, otras Historia, etc. Estas consideraciones se implementan como restricciones blandas espec�ficas, ya sea mediante reglas (por ejemplo, "no �ltima hora para matem�ticas") o penalizaciones ("penalizar si la misma materia aparece en d�as consecutivos"). Preferencias de espacios: Aunque no fue muy destacado en la reuni�n, hay preferencias personales en cuanto a los espacios, por ejemplo, profesores que prefieren no compartir el gimnasio con otro grupo, as� que, si es posible y el horario lo permite, se evitar� colocar dos grupos juntos en el gimnasio cuando alguno de los profesores involucrados tenga esa preferencia. No siempre se podr�, a veces por falta de horas libres el gimnasio debe compartirse, pero se intentar� acomodar. 5. Criterios de Optimizaci�n (Objetivos) Dado que no todas las restricciones blandas se podr�n satisfacer al 100%, el problema del horario se convierte en un compromiso donde hay que optimizar ciertos objetivos. En t�rminos de modelado, definimos una funci�n objetivo (o varias jerarquizadas) que mide la "calidad" del horario. El objetivo es encontrar, entre todos los horarios factibles (que cumplen duras), aquel que maximiza la satisfacci�n o, equivalentemente, minimiza las penalizaciones por incumplir las blandas. A continuaci�n, se resumen los criterios de optimizaci�n principales, alineados con las restricciones blandas ya explicadas: Criterio 0: Factibilidad y Cobertura. La condici�n previa a cualquier proceso de optimizaci�n es la obtenci�n de un horario factible. Esto implica que no se produzcan violaciones de las restricciones duras y que se garantice la cobertura �ntegra de todas las sesiones requeridas. Este criterio puede interpretarse de dos formas: (i) descartar de manera estricta cualquier soluci�n no factible, o (ii) permitir soluciones inicialmente inviables, pero se�alando las incompatibilidades mediante advertencias para su posterior correcci�n. Criterio 1: Calidad del Horario del Profesorado. Este es t�picamente el conjunto de objetivos blandos m�s importante. Incluye: o Minimizar el n�mero total de huecos (ventanas) del profesorado. Se busca que el n�mero medio de huecos por profesor por d�a sea lo m�s bajo posible. Asimismo, minimizar el m�ximo de huecos que tenga cualquier profesor, y el n�mero de profesores con alg�n hueco. En definitiva, reducir al m�nimo los periodos vac�os en la jornada de cada docente. o Respetar preferencias individuales. Cada violaci�n de una preferencia de un profesor (ya sea fuerte, media o suave) contribuye a un "coste". Las violaciones de preferencias fuertes idealmente deben ser cero (o alt�simo castigo si ocurren), las medias con un peso intermedio, las suaves con uno menor. El objetivo incluye minimizar el peso total de preferencias no satisfechas. Criterio 2: Criterios Pedag�gicos Espec�ficos. Aqu� incluimos: o Dispersi�n de sesiones de cada materia. Penalizar si una asignatura aparece en d�as contiguos para el mismo grupo (violaci�n de la dispersi�n m�nima). Recompensar si est�n distribuidas con d�as de por medio cuando posible. o No siempre �ltima hora. Penalizar si una materia �dif�cil� est� siempre en la �ltima franja en un grupo. o Evitar sesiones inmediatamente post/pre-recreo para ciertas materias. Si, por ejemplo, la asignatura X se marc� con preferencia "no despu�s del recreo", penalizar si se coloca despu�s del recreo. Lo mismo antes. Criterio 3: Guardias[IM4] . o Cobertura de guardias cumplida con holgura. Si hay margen, mejor poner 1 profesor extra de guardia que quedarse corto. Esto en realidad es duro (no se puede estar corto), pero la "holgura" puede ser blanda: no es necesario excederse, pero a veces tener un profesor de guardia adicional (si est� libre) podr�a verse bien. La combinaci�n de criterios de calidad puede abordarse de diferentes formas en la formulaci�n del problema. Una opci�n cl�sica es integrar todos los criterios en una �nica funci�n objetivo mediante un sistema de ponderaciones, mientras que otra es emplear un esquema lexicogr�fico, estableciendo un orden jer�rquico de prioridades. Sin embargo, en este contexto resulta especialmente relevante un planteamiento biobjetivo, en el que se priorizan de manera simult�nea dos aspectos fundamentales: (i) la satisfacci�n de las preferencias horarias del profesorado, y (ii) la minimizaci�n de los huecos en su jornada laboral. Bajo este enfoque, el modelo busca generar horarios que, adem�s de ser factibles, equilibren adecuadamente estas dos metas principales. M�todos como la programaci�n por metas permiten establecer umbrales deseables (por ejemplo, �cumplir al menos el 90 % de las preferencias docentes� y �garantizar un m�ximo de un hueco por d�a en promedio�), tratando de alcanzarlos de forma conjunta. En �ltima instancia, el resultado �ptimo ser� aquel horario que, respetando todas las restricciones duras, maximice la calidad global atendiendo a estos dos criterios prioritarios para el profesorado. 6. Datos de Entrada (Inputs) Necesarios Para poder generar un horario con todas las consideraciones anteriores, es necesario recopilar y suministrar al sistema una serie de datos de entrada completos. A continuaci�n, se enumeran todos los inputs que el centro debe preparar o que idealmente la herramienta debe poder importar de sistemas existentes, junto con ejemplos o detalles relevantes: Listado de asignaturas impartidas en el curso: Todas las materias que finalmente se van a ofrecer en el centro, tras el proceso de matriculaci�n. Esto incluye las obligatorias de cada curso y las optativas que el centro decida impartir en base a las solicitudes de alumnos. Ejemplo: Matem�ticas, Lengua, Ingl�s para ESO; F�sica, Qu�mica, Historia, etc., para Bachiller; M�dulos espec�ficos para FP; Optativas como Franc�s, Cultura Cient�fica, etc. Cada asignatura vendr� con informaci�n como su nombre, posiblemente un c�digo oficial, el curso o cursos donde se imparte, y su carga horaria semanal (n�mero de sesiones por semana). Por ejemplo: "Matem�ticas 3�ESO � 4 horas semanales". Listado de cursos y grupos: Todos los grupos de alumnos del centro que requieren horario. Por ejemplo: 1�ESO A, 1�ESO B, ..., 4�ESO A, 4�ESO B, 1�BACH A (Ciencias), 1�BACH B (Humanidades), etc., hasta incluir Ciclos Formativos (1�FP Adm, 2�FP Adm, etc.) y el grupo de Adultos (si se considerase). Para cada grupo, se puede indicar el curso al que pertenece, el n�mero de alumnos, y su aula de referencia si tiene una. Tambi�n si participa en alg�n programa especial (por ej., "3�ESO B � programa diversificaci�n"). Esto define la estructura de la ense�anza que el horario debe cubrir. Relaci�n de asignaturas por grupo (matriz grupo-materia): Especifica qu� materias cursa cada grupo y cu�ntas horas semanales de cada una. Esto deriva del curr�culo: p. ej., 2�ESO A: Matem�ticas (4h), Lengua (4h), Ingl�s (3h), Educaci�n F�sica (2h), etc. Incluye optativas asignadas: por ejemplo, "2�BACH A (Ciencias) cursa Dibujo T�cnico 4h, mientras 2�BACH B (Hum) cursa Literatura 4h, y ambos comparten Antropolog�a 2h como optativa com�n". De esta relaci�n se obtiene la lista de "lecciones" pendientes de programar: cada par grupo-materia con n horas genera n eventos que hay que ubicar. Profesor asignado a cada grupo-materia (asignaci�n docente): Para cada elemento de la matriz anterior (cada clase a impartir), indicar qu� profesor la imparte. Por ejemplo: 2�ESO A � Matem�ticas (4h) � profesora Garc�a; 2�ESO A � Ingl�s (3h) � profesor L�pez, etc. En algunos casos, un profesor imparte la misma materia a m�s de un grupo (p. ej., el mismo profe da F�sica a 1�BACH A y 1�BACH B). Esta asignaci�n normalmente la realiza cada departamento equilibrando cargas, y es un input crucial ya que el algoritmo no distribuye materias entre profesores, sino que ya recibe qui�n da qu�. N�mero de sesiones semanales por asignatura y reglas de distribuci�n: Para cada asignatura del centro (por curso), indicar el n�mero de horas semanales y, si es relevante, c�mo se suelen distribuir en la semana. Por ejemplo: "4 horas semanales -> 1 sesi�n al d�a en 4 d�as distintos"; "8 horas semanales (FP) -> 2 horas en 4 d�as (dobles)". Lista de periodos (slots) disponibles: Es necesario definir con precisi�n los periodos temporales sobre los que se construir� el horario. En nuestro caso, el turno de ma�ana comprende 5 d�as lectivos (lunes a viernes) con 6 franjas horarias por d�a (1� a 6� hora), lo que supone un total de 30 slots semanales destinados a clases o guardias. Adicionalmente, debe considerarse la media hora del recreo, que, aunque no constituye un periodo lectivo en s� mismo, s� es un bloque temporal cr�tico, pues en �l debe organizarse la presencia de un n�mero m�nimo de profesores de guardia cada d�a. Por tanto, el recreo se integra en la planificaci�n como un slot espec�fico para la cobertura de vigilancia, aunque no aparezca en los horarios de clase del alumnado. En conjunto, esta estructura temporal define la malla base sobre la que se programan clases, guardias y reuniones, y constituye parte de la configuraci�n general del problema. Disponibilidades e indisponibilidades horarias de profesores: Esto recoge, para cada profesor, las franjas en las que no puede o no quiere trabajar. Pueden estar marcadas a tres niveles (duras, medias, blandas). Por ejemplo: el profesor Mart�nez no est� disponible los mi�rcoles a �ltima hora (quiz� porque tiene que recoger a sus hijos del colegio), lo que esa ser�a una disponibilidad dura (no se le asigne nada ah�). La profesora G�mez prefiere no madrugar los lunes (preferencia media). El profesor D�az tiene tratamientos m�dicos los martes de 12:00 a 13:00 � indisponibilidad dura en martes 4� hora. Todas estas franjas prohibidas o indeseadas por profesor se deben volcar para que el motor respete o penalice seg�n corresponda. Tambi�n incluye los casos de profesores que solo trabajan turno de ma�ana o tarde: en nuestro centro todos salvo los del grupo adulto trabajan de ma�ana, pero si uno fuera exclusivamente de tarde, su disponibilidad de ma�ana ser�a nula (no se le asigna nada de ma�ana). Preferencias/incompatibilidades por asignatura: Similar al anterior, pero para las materias. Por ejemplo: "No impartir matem�ticas �ltima hora del d�a" (preferencia dura), "Educaci�n F�sica requiere que el profesor tenga 5 min extra para cambiarse, as� que si va antes del recreo mejor" (eso ser�a un detalle fino). Cualquier restricci�n de este tipo se debe enumerar. En las notas se mencion� que es posible que algunas asignaturas deban planificarse antes o despu�s del recreo, sin concretar; esto sugiere que la direcci�n podr�a marcar ciertas materias con preferencia horaria (por ejemplo, Educaci�n F�sica siempre 1� hora tras recreo). Si existieran, se incluir�an aqu� con su nivel de preferencia. N�mero de guardias [IM5] por profesor y por tipo: Es un dato que suele decidir Jefatura en funci�n de las 7h no lectivas de cada uno. Se debe especificar cu�ntas guardias de pasillo tiene asignadas cada profesor, cu�ntas guardias de recreo, y cu�ntas de convivencia/otros (si aplica). Por ejemplo: Profesor A � 2 guardias pasillo + 1 recreo; Profesor B � 1 pasillo + 1 recreo; Profesor C (jefe de estudios) � 0 guardias porque est� exento, etc. Esta distribuci�n internamente suele hacerse intentando repartir esas 7 horas no lectivas: adem�s de guardias, cuentan reuniones, tutor�a, etc. En promedio, un profesor con 18h lectivas tendr� 4-5 guardias semanales (sumando tipos) porque las otras horas se le van en reuniones y otras tareas no planificadas. Pero es importante introducirlo tal cual se quiere en el horario. Requisitos m�nimos de guardias por franja: Indicar, para cada hora del d�a (o al menos cada tipo de franja), cu�ntos profesores de guardia deben asignarse. Por ejemplo: "1� hora: 3 guardias pasillo; 2� hora: 4 guardias pasillo; ... recreo: 6 guardias patio; etc." Esto puede venir de la normativa (5 m�nimos, pero ajustado al centro como vimos). Estos valores son usados por el modelo para asegurarse de cubrirlos. Listado de reuniones con participantes: Especificar cada evento tipo reuni�n que deba programarse y qui�nes asisten. En nuestro caso: "Reuni�n de Tutores � participantes: todos los tutores de curso + Jefatura + Orientador". Si hubiera reuni�n de departamento: "Reuni�n Departamento Matem�ticas � participantes: 5 profesores (X, Y, Z, ...)". Cada reuni�n planificada en horario lectivo es un evento a ubicar que bloquea a esos participantes. Listado de aulas y asignaci�n curso�materia�aula: Lista de todas las aulas y espacios disponibles en el centro, indicando sus caracter�sticas (capacidad, equipamiento, uso espec�fico) y posibles indisponibilidades horarias. Ejemplo: �Laboratorio de F�sica � no disponible martes 3� hora (limpieza)� o �Sala de Usos M�ltiples � ocupada lunes 1� hora por acto semanal�. Adem�s, se recoge la asignaci�n previa de cada asignatura y grupo a un aula determinada, cuando sea fija. Por ejemplo: �Educaci�n F�sica 2�ESO A � Gimnasio�, �M�sica 1�ESO B � Aula de M�sica�, �Biolog�a 4�ESO C � Laboratorio de Ciencias�, �Aula general 3�ESO B � A3B�. Esta informaci�n se considera un dato de entrada y no se modifica en la planificaci�n: el modelo �nicamente debe programar las sesiones en el tiempo respetando las aulas asignadas y evitando solapamientos o usos indebidos. Compatibilidades de paralelismo (par�metros de optativas/desdobles): Hay que introducir qu� asignaturas deben ir paralelas con cu�les. Esto podr�a ser una lista de conjuntos: p. ej., "{Dibujo T�cnico 2�Bach C, Antropolog�a 2�Bach (mixto), Psicolog�a 2�Bach (mixto)} son simult�neas". O "{�mbito Socioling��stico 3� diversificaci�n, Matem�ticas 3�A, Lengua 3�B} simult�neas". Cada conjunto indica que esos eventos deben tener el mismo horario. Nota: si las cargas horarias difieren (4h vs 2+2), �stas se pueden dividir: en el ejemplo de 4h vs 2h+2h, se partir�a la de 4h en dos sub-eventos de 2h, y se a�ade una restricci�n para que esos sub-eventos no coincidan entre s�, pero cada uno coincida con una de las 2h optativas correspondientes. Estos detalles se traducen a par�metros que el algoritmo entienda para sincronizar horarios. En resumen, la herramienta necesita toda la informaci�n acad�mica y de organizaci�n del centro antes de poder calcular el horario. En la pr�ctica, buena parte de estos datos ya existen en sistemas administrativos (p. ej., la aplicaci�n S�neca de la Junta de Andaluc�a contiene el cat�logo de asignaturas y los datos de profesores). Ser�a conveniente que la herramienta de horarios pudiera importar o rellenar autom�ticamente muchos de estos datos para ahorrar tiempo y errores manuales. Por ejemplo, ser�a deseable que el software pudiera: � Importar el cat�logo oficial de asignaturas de la Consejer�a de Educaci�n (con sus c�digos, descripciones y horas) y permitir al centro simplemente seleccionar cu�les se imparten. � Importar la lista de profesores desde S�neca (el sistema de gesti�n de centros) con sus nombres, c�digos y si es posible sus especialidades. � Facilitar una interfaz para cargar las preferencias de los profesores directamente en la herramienta, en lugar de tener que traducir formularios en papel a par�metros manualmente. � Permitir igualmente cargar de forma semiautom�tica la asignaci�n de materias a profesores que los departamentos han decidido, quiz�s mediante plantillas o extrayendo datos de S�neca si all� constan los profesores-tutores de cada grupo/materia. Estos "deseos" sobre la herramienta apuntan a una mejor integraci�n con los sistemas existentes y a simplificar el preproceso de introducir datos. En nuestro caso, asumiremos que se ha introducido todo correctamente en el formato requerido. Con todos estos inputs, el algoritmo puede construir el modelo y buscar la mejor asignaci�n de eventos a slots. 7. Resultados Esperados (Outputs) El output principal del problema es, naturalmente, un Horario completo para el instituto que especifique qui�n (profesor), qu� (actividad), cu�ndo (d�a y periodo) y d�nde (aula) en cada sesi�n. En otras palabras, el resultado es la asignaci�n de cada evento (clase, guardia, reuni�n) a un espacio-tiempo concreto cumpliendo las restricciones. Este horario se suele presentar en varios formatos: Horario por grupo (alumnado): Para cada grupo de alumnos, una tabla de 5 d�as � 6 horas indicando qu� asignatura tienen en cada periodo, y con qu� profesor y en qu� aula. Por ejemplo, el horario de 2�ESO A podr�a mostrar Lunes 1�: Matem�ticas (Prof. X, Aula 12); Lunes 2�: Ingl�s (Prof. Y, Aula 12); etc. Esto permite a los alumnos saber qu� clase toca y d�nde cada d�a. Horario individual de cada profesor: Listando, para cada profesor, sus clases y actividades por d�a/periodo. Ejemplo: Prof. Garc�a � Lunes: 1� Matem�ticas 3�B, 2� guardia pasillo, 3� libre, 4� Matem�ticas 2�A, 5� libre, 6� Matem�ticas 2�A; etc. De aqu� el profesor ve cu�ndo imparte clase, cu�ndo tiene guardia, reuniones, y sus huecos. Listados de guardias y reuniones cubiertas: Por ejemplo, una tabla por d�a indicando qu� profesores est�n de guardia cada hora, para comprobar que se cubren los m�nimos. Y confirmaci�n de que la reuni�n de tutores (u otras) qued� fijada tal d�a a tal hora, con la lista de asistentes sin conflicto. Finalmente, un output no menos importante es que el horario generado sea exportable o comunicable. Ser�a deseable que la soluci�n se pudiera volcar al sistema oficial (p. ej., exportar a S�neca en formato establecido, o en un formato est�ndar como XHSTT/XML) para su difusi�n y registro oficial. Aunque esto es m�s una funcionalidad de la herramienta que del modelo en s�, vale la pena mencionarlo: al final, el horario debe poder imprimirse, difundirse a profesores/alumnos y subirse a las plataformas correspondientes. 8. M�tricas Adem�s de estos horarios en formato humano, el output puede incluir indicadores de calidad o m�tricas derivadas del horario final para evaluar c�mo de bien se cumplieron los criterios blandos. - N�mero total de huecos de profesor y promedio de huecos por profesor.� - Listado de profesores con m�s huecos (p.ej., "Profesor Z tiene 3 huecos semanales, es el m�ximo"). - Distribuci�n de cargas: cu�ntos profesores con 18h, con 19h, 20h, 21h de clase. - Cumplimiento de preferencias: cu�ntas preferencias duras de profesores se violaron (ideal 0), cu�ntas medias no satisfechas, etc. - Uso de �ltimas horas: porcentaje de profesores que logran libre el viernes �ltima hora, etc. - Uso de espacios especiales: por ejemplo, laboratorios utilizados X% del tiempo disponible. - Balance de guardias: si todos los profesores cumplen exactamente sus guardias asignadas, etc. Estas m�tricas sirven para justificar que el horario es "bueno" o para detectar puntos de mejora (p.ej., si un profesor qued� con muchos huecos, quiz� intercambiando alguna clase con otro se podr�a arreglar, etc.). En la pr�ctica, como el algoritmo iterativo ya persigui� minimizar huecos, el horario seleccionado ser� el que ya optimiza esas m�tricas centrales. 9. Anexo: Formulaci�n Matem�tica del Modelo de Horarios En este documento, como complemento, se proporciona a continuaci�n un modelo matem�tico resumido del problema, que formaliza muchas de las entidades, par�metros, variables y restricciones descritas. Este modelo sirve de base para implementar la soluci�n computacional (por ejemplo, en un solver de Programaci�n Lineal Entera Mixta) y garantizar que se cumplen todos los requisitos. Cabe mencionar que, dada la complejidad, a veces se recurre a resolver el problema en dos fases o con heur�sticas, pero el modelo completo ilustra el est�ndar al que apuntamos. A continuaci�n, se presenta de forma resumida una formulaci�n matem�tica del problema de horarios del instituto como un modelo de Programaci�n Lineal Entera (ILP). Esta formulaci�n define los conjuntos, par�metros, variables de decisi�n y restricciones principales, siguiendo la l�gica expuesta en las secciones anteriores. No se utilizar� notaci�n LaTeX incrustada en l�nea en el texto, sino que se describir� en un formato entendible que puede transcribirse a un documento (.docx) con las ecuaciones correspondientes. Conjuntos e �ndices: � P �: Conjunto de profesores p&#8712;P �. � G �: Conjunto de grupos de alumnos g&#8712;G �. � M �: Conjunto de materias (asignaturas) m&#8712;M �. � A �: Conjunto de aulas (recursos espaciales) a&#8712;A �. � D �: Conjunto de d�as de la semana d&#8712;D �(Lunes�Viernes). � H �: Conjunto de horas por d�a h&#8712;H �(periodos 1�6 en nuestro caso). � T �: Conjunto de slots de tiempo (parejas d�a-hora). Alternativamente, indexaremos un periodo �nico t �si combinamos d�a y hora en un solo �ndice de 1 a 30. � L �: Conjunto de lecciones requeridas a programar. Cada lecci�n l&#8712;L �representa un evento de clase de un grupo en una materia que debe ser ubicado. Por ejemplo, si 3�A tiene 4 horas de Matem�ticas, eso genera 4 lecciones l �(podemos enumerarlas l=3A,Matem�ticas,1 �� 3A,Matem�ticas,4 �). Tambi�n habr� lecciones correspondientes a guardias y reuniones, si las modelamos de forma similar (o en conjuntos separados, ver abajo). Para simplificar, consideramos dos tipos de eventos: lecciones acad�micas (grupo-materia con un profesor asignado) y eventos no acad�micos (guardias, reuniones). Podr�amos extender L �para contener todos, diferenciando por tipos. Par�metros: � nl �: N�mero de sesiones semanales requeridas para la clase l �. En general ser� 1 porque cada l �es una sesi�n �nica, pero este par�metro se usa si modelamos agrupado (aqu� asumiremos cada l �ya es 1 sesi�n). � profl �: Profesor asignado a la lecci�n l �(para clases lectivas). Para guardias, profl �ser�a el profesor a quien corresponde esa guardia. Para reuniones, este modelo requerir�a manejar m�ltiples profesores por evento, lo cual se suele modelar con restricciones especiales m�s que con un solo �ndice; aqu� omitiremos reuniones en la formulaci�n formal por simplicidad. � grupol �: Grupo de alumnos al que pertenece la lecci�n l �(si aplica; para guardias no hay grupo, y para reuniones tampoco un solo grupo). � material �: Materia impartida en la lecci�n l �(aplica solo a clases). � aulaReql �: Indica si la lecci�n l �requiere un tipo espec�fico de aula o un aula particular. Podr�a ser un subconjunto de A �permitido. Por ejemplo, una clase de F�sica podr�a requerir aulaReql={Lab. F�sica} �. � duracionl �: Duraci�n en periodos de la lecci�n l �. Normalmente 1; si tuvi�ramos sesiones dobles predefinidas, podr�a ser 2 para esas. � availpt �: Disponibilidad del profesor p �en el slot t �. Es 1 si el profesor puede trabajar en ese periodo, 0 si no puede (indisponibilidad dura). Esto incorporar�a, por ejemplo, que availpt=0 �para un profe con itinerancia en otro centro ese d�a/hora. � minGuardt �: N�mero m�nimo de profesores de guardia requeridos en el slot t �(si t �es una hora lectiva). � typet �: Tipo de slot (ej: si t �corresponde a recreo, a primera hora, a �ltima hora, etc., para aplicar ciertas reglas). � reqGuardp �: N�mero total de guardias que el profesor p �debe cubrir en la semana (sumando todos los tipos). Podr�amos refinar con reqGuardppasillo �, reqGuardprecreo �por tipo. � Wprefp,t �: Penalizaci�n (peso) por asignar al profesor p �una clase en el slot t �que �l quer�a evitar. Este peso es alto si p �hab�a marcado t �como preferencia fuerte de no trabajar, menor si era media, etc. � Wgap �: Peso o penalizaci�n por cada hueco en el horario de un profesor (utilizado en objetivo). � Wext �: Peso por clases en horas extremas indeseadas. � Wspread �: Peso por violaci�n de dispersi�n (p.ej., misma materia dos d�as seguidos). � (En general, Wx �representar�a distintos pesos para cada criterio blando en la funci�n objetivo). Variables de Decisi�n: La variable principal es la asignaci�n de lecciones a slots, posiblemente tambi�n a aulas: � xl,t,a&#8712;{0,1} �: vale 1 si la lecci�n l �se programa en el slot de tiempo t �en el aula a �, y 0 en caso contrario. Esta es una variable binaria t�pica para asignar eventos a tiempos y lugares simult�neamente. Dado que en nuestro problema cada lecci�n tiene un profesor y un grupo asociados, esta variable cubre indirectamente qui�n ense�a y a qui�n, en tal slot y aula. Si preferimos descomponer en dos fases (primero horarios ignorando aulas, luego asignar aulas), podemos usar variables yl,t �para lecci�n l �en slot t �(ignorando aula), y luego variables zl,a �para asignar un aula a cada lecci�n. Pero aqu� presentaremos la versi�n integrada para mayor claridad. Tambi�n podemos define variables auxiliares para c�lculos de huecos, etc., aunque no son estrictamente necesarias en la formulaci�n b�sica: - gapp,d �: n�mero de huecos en el horario del profesor p �el d�a d �(entero, puede ser calculado con otras variables). - firstp,d,lastp,d �: indicadores de si el profesor p �trabaja en la primera o �ltima hora del d�a d �. - etc., si queremos modelar expl�citamente ciertas medidas para la funci�n objetivo. Restricciones Duras (Modelo): Asignaci�n �nica de cada lecci�n: Cada lecci�n l �debe ser asignada exactamente a un slot (y aula). � t&#8712;T&#8203;a&#8712;A&#8203;xl,t,a=1,&#8193;&#8704;l&#8712;L � Esto garantiza que cada sesi�n requerida ocurre en un �nico periodo. (Si usamos yl,t �, ser�a t&#8203;yl,t=1 �.) No colisi�n de profesor: Un profesor no puede tener dos eventos a la vez. Dado que cada lecci�n l �tiene un profl=p �, imponemos que para cada profesor p �y cada slot t �: � l&#8712;L:profl=p&#8203;&#8196;a&#8712;A&#8203;xl,t,a&#8196;&#8196;&#8804;1,&#8193;&#8704;p&#8712;P,&#8196;&#8704;t&#8712;T � Es decir, contando todas las lecciones cuyo profesor es p �asignadas al mismo tiempo t �, a lo sumo 1 (no puede dar m�s de una clase a la vez). No colisi�n de grupo: Similarmente, cada grupo de alumnos solo puede tener una clase a la vez. Para cada grupo g �y slot t �: � l&#8712;L:grupol=g&#8203;&#8196;a&#8712;A&#8203;xl,t,a&#8196;&#8196;&#8804;1,&#8193;&#8704;g&#8712;G,&#8196;&#8704;t&#8712;T � Por ejemplo, 2�A no puede tener dos asignaturas en el mismo momento. Capacidad de aula (una clase por aula por slot): Para cada aula a �y slot t �: � l&#8712;L&#8203;xl,t,a&#8196;&#8196;&#8804;1,&#8193;&#8704;a&#8712;A,&#8196;&#8704;t&#8712;T � O sea, cada aula a �aloja a lo sumo una lecci�n en cada periodo. (En caso de excepciones como gimnasio con 2 grupos a la vez, se podr�a modelar el gimnasio como dos recursos diferentes o ajustar este constraint para esa aula en particular permitiendo &#8804;2 cuando a=gimnasio �. Pero lo habitual es 1). Compatibilidad aula-materia: Si una lecci�n l �requiere un tipo espec�fico de aula, debemos forzar que solo se le asigne a esas. Por ejemplo: � t&#8203;a&#8713;aulaReql&#8203;xl,t,a=0,&#8193;&#8704;l que tiene requisito de aula � Esto garantiza que si F�sica necesita laboratorio, no la coloquemos en Aula normal. Si el requisito es �nico aula, b�sicamente la lecci�n solo podr� usar esa en la asignaci�n. Disponibilidad de profesores y grupos: Si un profesor p �o un grupo g �no est� disponible en cierto slot (p. ej., profesor itinerante, grupo en proyecto, etc.), no se le puede asignar nada. Para profesores: � l:profl=p&#8203;&#8196;a&#8203;xl,t,a&#8804;availpt,&#8193;&#8704;p,&#8196;&#8704;t � Si availpt=0 �, esto fuerza xl,t,a=0 �para cualquier lecci�n de ese profesor en t . Para grupos ser�a an�logo si hay slots no disponibles (no suele aplicarse salvo actividades extraescolares puntuales). Cobertura de guardias m�nima: Para cada slot t �que corresponde a un periodo lectivo o recreo donde se requieran guardias: � l&#8712;L:l es guardia en t&#8203;&#8196;xl,t,aula_NA&#8196;&#8196;&#8805;minGuardt,&#8193;&#8704;t � Esta restricci�n es un poco conceptual porque �l �es guardia en t �� sugiere que definimos lecciones de guardia preubicadas, lo cual no es as�. Alternativamente, debemos crear variables de guardia: por ejemplo, para cada profesor y slot, una variable gp,t �que es 1 si p �est� de guardia en t �. Otra forma: consideramos en L �una "lecci�n de guardia" para cada profesor y para cada guardia que debe hacer, sin predeterminar cu�ndo. Entonces profl=p �y la lecci�n es "guardia". Estas lecciones de guardia compiten por slots como las dem�s. Entonces la restricci�n se convierte en: � l&#8712;L:l tipo guardia&#8203;xl,t,*&#8805;minGuardt,&#8193;&#8704;t � (donde * �indica que da igual el aula; de hecho podr�amos omitir aula for guardia or use a dummy aula "NA"). Esto asegura que se asignen suficientes guardias cada hora. Adicionalmente, cada profesor p �tendr� un n�mero de lecciones "guardia" igual a su reqGuardp �, y por la restricci�n (1) cada una cae en un slot distinto, as� se garantiza que cumple exactamente sus guardias. L�mites de horas lectivas por profesor: Sumando todas las clases asignadas a un profesor p �: � l:profl=p,l es clase lectiva&#8203;&#8196;t,a&#8203;xl,t,a&#8196;&#8196;&#8804;maxLectp � y � l:profl=p,l es clase lectiva&#8203;&#8196;t,a&#8203;xl,t,a&#8196;&#8196;&#8805;minLectp � donde maxLectp �ser�a 21 (o 15 si tiene reducci�n) y minLectp �ser�a 18 (o menor si reducci�n). Esto obliga que el profesor p �tenga entre X e Y clases programadas a la semana. En nuestro modelo, esto pr�cticamente se cumple por construcci�n de L �(porque L �tiene las clases asignadas a cada profe; si un profe ten�a menos de 18 lecciones en L �, no podr�amos crear m�s desde el solver). En realidad, los departamentos ya asignan pensando en 18. As� que esta restricci�n es m�s un chequeo: en el dataset de entrada, cada profe tendr� su n�mero de clases asignadas. Si alguno no llega a 18, es porque tiene reducci�n; si pasa de 21, dataset inv�lido. Entonces esta restricci�n debe ser compatible con el input. L�mite diario de clases por profesor: Para cada profesor p �y d�a d �: � l:profl=p&#8203;&#8196;a,t=d,h&#8203;xl,t,a&#8196;&#8196;&#8804;5,&#8193;&#8704;p,&#8196;&#8704;d � (Sumando todas las clases en los slots de ese d�a d �para p �). Esto garantiza que no imparte m�s de 5 clases ese d�a. An�logamente, podr�amos limitar guardias diarias a 2: � l:profl=p,l tipo guardia&#8203;&#8196;t=d,h&#8203;xl,t,*&#8196;&#8196;&#8804;2,&#8193;&#8704;p,&#8196;&#8704;d � (o incorporar las guardias en la cuenta total: 5 clases + 2 guardias = 7 periodos m�ximos, pero eso ya se cumple separadamente con 5 y 2). Secuenciaci�n (no dobles en ESO/Bach): Para cualquier grupo g �y materia m �que no permita sesiones dobles, asegurar que dos lecciones de m �para g �no caigan en slots consecutivos del mismo d�a. Esto requiere una restricci�n: si l1=g,m,i �y l2=g,m,j �son dos lecciones distintas de la misma materia, entonces para cada d�a d �y hora hH �: � a&#8203;xl1,d,h,a+a&#8203;xl2,d,h+1,a&#8196;&#8196;&#8804;1 � Esto evita que l1 �est� en (d�a d, hora h) y l2 �en (d�a d, hora h+1). Si ambas fueran 1 significar�a doble seguido, la restricci�n lo proh�be. Para FP podr�amos no imponer esto (o directamente no parametrizar esas materias en esta restricci�n). Paralelismo obligatorio: Si cierto conjunto de lecciones Lpar={la,lb,...} �debe impartirse simult�neamente (optativas en paralelo, etc.), entonces para cada par li,lj&#8712;Lpar �: � a&#8203;xli,t,a=a'&#8203;xlj,t,a',&#8193;&#8704;t&#8712;T � Esto b�sicamente fuerza que si una est� en t �, las dem�s tambi�n en t �. En la pr�ctica, m�s sencillo: asignamos un mismo "id de paralelo" y creamos una variable com�n para el slot. Pero siguiendo esta idea, al final resultan o todas 0 en t �o todas 1 en t �para cada t �. Y la restricci�n de asignaci�n �nica combinada con esta har� que efectivamente todas elijan el mismo t �. Adicionalmente, si hay una lecci�n que fue dividida (la de 4h hecha 2+2), hay que prohibir que sus dos sub-lecciones vayan el mismo d�a/hora: similar a la de no dobles, pero entre esas subpartes. Ya lo cubrimos conceptualmente con secuenciaci�n, pero enfatizar: las dos sublecciones de Dibujo T�cnico (4h) no pueden coincidir juntas; de hecho, no pueden ni ser el mismo d�a contiguo (pues entonces casi es como seguidas). Probablemente con la restricci�n general de no dobles ya no coinciden en misma jornada, porque contar�a como consecutivas si son seguidas, pero si cayeran en 1� lunes y 3� lunes no son consecutivas pero mismas d�a. Eso quiz�s no es prohibido duramente, solo blandamente "mejor en d�as distintos". Lo omitimos como duro. Restricciones blandas (como penalizaciones en el objetivo): No las pondremos todas como restricciones (que ser�an duras), sino que las incorporamos en la funci�n objetivo mediante penalizaciones. Mencionamos algunas claves de c�mo se modelan: Huecos de profesor: Se puede introducir variable gapp,d,h �binaria que vale 1 si el profesor p �tiene un hueco en el periodo h �del d�a d �, y 0 si no. O directamente calcular de x: un hueco ocurre si p �trabaja en alguna hora antes y en alguna hora despu�s de h �, pero h �est� libre. Eso requiere condiciones l�gicas complejas, m�s f�cil con aproximaciones. Supongamos calculamos a posteriori, o penalizamos "ventanas" definidas como espacios libres entre clases para cada profesor. Por simplicidad, penalizaremos cualquier par de clases no contiguas dejando hueco, etc. Mejor: Minimizar p,d&#8203;gapp,d �donde gapp,d �= (n�mero de huecos del d�a). Este gapp,d �se relaciona con x: por ejemplo, si prof p tiene clases en periodos {h1,...,hk} �del d�a d (ordenadas), entonces undefined . Es decir, rango que abarca desde primera a �ltima clase, menos el n�mero de clases, da los huecos intermedios. Podemos deducir primera y �ltima clase con variables firstp,d,h �= 1 si p inicia su jornada en h, lastp,d,h �= 1 si termina en h. No entraremos en detalle, solo sabemos que se puede modelar y penalizar. Preferencias de horarios: Si un profesor p �ten�a una preferencia de no dar clase en slot t �, podemos pre-calcular si se viol�: b�sicamente si p �tiene algo en t �contra su preferencia. Esto equivale a las variables x de sus lecciones: l:profl=p&#8203;a&#8203;xl,t,a �tomando valor 1 significa est� ocupado en t �. Podr�amos multiplicar eso por Wprefp,t �y sumar al objetivo. Primera/�ltima horas: Similar a preferencias, se penaliza si un profesor tiene clase en primera o �ltima hora m�s all� de cierto l�mite. P.ej., penalizar cada asignaci�n en �ltima hora viernes, o cada asignaci�n en primera hora lunes, etc., con un peso. Dispersi�n materia: Penalizar para cada grupo-materia cada par de clases en d�as consecutivos. Esto se implementa: para lecciones li,lj �de misma materia y grupo, si li �est� en lunes y lj �en martes, a�adir penalizaci�n Wspread �. Esto requiere introducir variables indicadoras o directamente sumarlo a objetivo via combinaciones de x (nonlinear if we do directly). Alternativamente, precompute all undesired pairs of slots (d�as contiguos) and ensure we add something if those both happen. That can be linearized. We'll not detail linearization here. Guardias consecutivas / equidad: Penalizar si un profesor tiene dos guardias seguidas: esto se detecta de x for guard events of that prof in consecutive slots. Could linearize similarly to no double classes, but as soft. Balance carga: Minimizar m�ximo descontento: that's a min-max objective, often converted to linear by introducing new variable and constraints. Or use weighted sum to approximate fairness. Funci�n Objetivo: En definitiva, la funci�n objetivo Z �podr�a ser algo como: Minimizar Z=Wgapp,d&#8203;gapp,d&#8196;+&#8196;p,t&#8203;Wprefp,tl:profl=p&#8203;a&#8203;xl,t,a&#8196;+&#8196;Wextp,d&#8712;{first/last}&#8203;l:profl=p&#8203;a&#8203;xl,d,ext,a +&#8196;Wspreadli,lj:mismo grupo y materiay d�as consecutivos&#8203;a&#8203;xli,ti,a*a'&#8203;xlj,tj,a'&#8196;+&#8196;WguardConsecp,d,h&#8203;gp,d,h*gp,d,h+1&#8196;+&#8196;&#8943; (donde he usado notaci�n multiplicativa * para indicar que habr�a que linearizar esas interacciones). Esta funci�n objetivo es una suma ponderada de penalizaciones: huecos, preferencias no respetadas, clases en horas extremas, materias concentradas, guardias seguidas, etc. Minimizar Z �significa conseguir el horario con menos "coste" blando, es decir, m�s acorde a las preferencias y criterios deseados. Nota: El modelo anterior es esquem�tico. En la implementaci�n real, se pueden introducir mejoras en eficiencia (p. ej., separar la asignaci�n de aulas en un subproblema, usar variables continuas para penalizaciones en vez de binary expansions, etc.). Tambi�n, como apuntan investigaciones, este problema de High School Timetabling en su versi�n general (XHSTT) se suele resolver con modelos a�n m�s elaborados o descomposici�n debido a su complejidad. Sin embargo, la formulaci�n aqu� expuesta es suficiente para capturar la mayor�a de restricciones de un instituto t�pico espa�ol y podr�a resolverse con un solver exacto en instancias de tama�o moderado. En conclusi�n, esta especificaci�n DERCIOM ha cubierto todos los aspectos del problema de horarios: descripci�n del contexto y objetivos, definici�n de entidades involucradas, listado de restricciones duras indispensables, identificaci�n de restricciones blandas y criterios de optimizaci�n, requisitos de datos de entrada, resultados esperados, y un anexo con la formalizaci�n matem�tica del modelo. Con todo ello, se dispone de una comprensi�n integral del "problema del instituto" que servir� de base para desarrollar e implementar la herramienta Smartiming u otra soluci�n de optimizaci�n de horarios en este entorno educativo. [IM1]Nos hemos quedado aqu� en la revisi�n con Alfredo [IM2]Preguntar a Paco [IM3]Se establece un m�nimo de guardias de recreo y pasillo para los profesores (por separado)? [IM4]No tengo claro si las guardias que tienen que hacer los profesores a la semana ya est�n definidas, o si el sistema tiene que hacer el reparto de tal forma que se cubran las X horas que tienen que hacer de guardias a la semana. [IM5]Igualmente, hay que preguntar si estos datos est�n fijos o hay holgura a la hora de hacer la asignaci�n de guardias.
