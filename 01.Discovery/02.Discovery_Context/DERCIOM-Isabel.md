![](Aspose.Words.9e2e22b0-6c14-4cf1-92ee-d86c5682bb9f.001.png)

**SMARTIMING. Descripción, entidades, restricciones, criterios, input, output y métricas (DERCIOM**

# Descripción General

El presente documento describe en detalle el problema de generación de horarios en un instituto que imparte Educación Secundaria Obligatoria (ESO), Bachillerato y Ciclos Formativos de Formación Profesional. Se sigue el formato **DERCIOM** de OGA, abarcando la **Descripción** del problema, las **Entidades** involucradas, las **Restricciones** duras y blandas, los **Criterios** u objetivos de optimización, los **Inputs** (datos de entrada necesarios), los **Outputs** esperados, y finalmente un anexo con el **Modelo matemático** correspondiente. El objetivo es incorporar toda la información relevante recopilada en las notas de la reunión, con explicaciones narrativas y ejemplos ilustrativos en cada sección, tal como en el DERCIOM original, evitando omisiones.

En este instituto, la mayor parte de la actividad lectiva se concentra en el **turno de mañana**, con clases de 8:15 a 14:45 (cada sesión dura 1 hora) y un recreo de 30 minutos a media mañana (de 11:15 a 11:45). **Excepción:** existe únicamente un grupo de secundaria para adultos en horario de tarde (18:00 a 22:00), cuyo horario actualmente se elabora manualmente por separado. Por tanto, el problema principal se enfoca en la planificación del horario de mañana para ESO, Bachillerato y FP.

Este problema de horarios es **combinatorio y multi-objetivo**, catalogado como NP-difícil. Se deben cumplir todas las restricciones **legales y organizativas** (restricciones duras) a la vez que se intenta satisfacer al máximo las **preferencias del profesorado** (restricciones blandas) y ciertos **criterios pedagógicos** (restricciones blandas). Todo ello se debe lograr utilizando eficientemente los **recursos limitados** del centro (tiempo, aulas, personal disponible, etc.). En la práctica, el Jefe de Estudios (u otra persona designada) es el encargado de elaborar estos horarios, respetando la normativa educativa aplicable (por ejemplo, límites de jornada docente) y buscando un equilibrio entre las necesidades del centro y las peticiones individuales.

Antes de abordar la formalización del problema, conviene describir cómo se genera actualmente el horario (*As Is*) y cómo se proyecta mejorar el proceso en el futuro (*To Be*). A continuación, se detalla primero la situación actual en el centro y seguidamente la visión propuesta para optimizar la carga de datos y la generación de horarios.

1. ## *Situación Actual (As Is)*

En la situación actual, la **elaboración del horario** en el centro educativo requiere una **intervención manual intensiva** por parte de la Jefatura de Estudios y los responsables de cada departamento didáctico. Antes de que la herramienta informática pueda realizar cualquier cálculo, es necesario introducir manualmente toda la información académica, organizativa y de recursos humanos que define el funcionamiento del centro.

Este proceso comienza con la recopilación y carga de los **datos estructurales básicos**, que incluyen:

- El **listado completo del profesorado**, con su dedicación horaria y posibles reducciones (por edad, tutoría, cargos, etc.).
- El **conjunto de cursos y grupos** que requiere planificación, diferenciando niveles ordinarios, programas de diversificación, itinerarios de Bachillerato y Ciclos Formativos.
- El **catálogo de asignaturas ofertadas**, incluyendo troncales, optativas, ámbitos y módulos de FP, cada una con su carga horaria semanal.
- La **asignación de materias a profesores y grupos**, decidida previamente por cada departamento, y considerada cerrada e inamovible por el sistema.
- Y la **relación de aulas y espacios disponibles**, incluyendo tanto aulas ordinarias como espacios específicos (laboratorios, gimnasio, aula de música, etc.), junto con sus restricciones de uso (por ejemplo, no disponibilidad en ciertas franjas por limpieza o actos).

A esto se añaden las **ocupaciones no lectivas** del profesorado, tareas deben figurar en el horario y restan disponibilidad para otras actividades, por lo que se consideran eventos de planificación al mismo nivel que las clases:

- **Guardias de pasillo**, con demanda fija por franja.
- **Guardia de recreo**, que implica cobertura simultánea de 6 docentes en una franja no lectiva intermedia.
- **Guardias de convivencia**.
- **Reuniones semanales obligatorias**, por ejemplo, reunión de tutores u otras sesiones de coordinación.

Además, el profesorado indica sus **preferencias horarias** mediante formularios recogidos previamente por el equipo directivo. Estas preferencias pueden clasificarse en tres niveles según su importancia:

- **Duras**: por conciliación u otras causas justificadas, se consideran de obligado cumplimiento.
- **Medias**: deseables, pero no críticas.
- **Blandas**: sin justificación explícita, pero valoradas si es posible atenderlas.

Todas estas variables deben introducirse manualmente en la herramienta, ya que no existe un sistema automático de importación desde plataformas administrativas como Séneca. Esta carga implica la conversión de formularios físicos, hojas Excel y acuerdos internos en una estructura paramétrica que entienda el software, lo que introduce un elevado **riesgo de error humano**, dificultad para validar incoherencias, y **un coste operativo alto en tiempo y esfuerzo**.

Una vez introducidos todos los datos, la herramienta comienza el proceso de planificación en dos fases. En la primera, se genera una **solución factible inicial** en pocos minutos. Esta solución cumple todas las **restricciones duras** (ausencia de solapes de recursos, cobertura completa de sesiones, respeto de límites horarios del profesorado, paralelismo de optativas, disponibilidad de aulas…) y además impone un criterio cuantitativo sobre las **preferencias** del profesorado: la solución inicial sólo es aceptada si logra satisfacer un **porcentaje mínimo del conjunto de preferencias**, especialmente aquellas marcadas como duras o justificadas. Así, el sistema no considera factible cualquier solución que simplemente cumpla las restricciones técnicas, sino que exige un nivel base de calidad subjetiva antes de pasar a la siguiente fase.

Una vez alcanzado ese umbral mínimo de preferencias, el algoritmo considera “cerrado” el cumplimiento de preferencias y se centra exclusivamente en la **optimización de los huecos** en la jornada del profesorado. Esta optimización es iterativa: se exploran movimientos que reduzcan el número total de ventanas libres, realizando hasta 20 intentos por solución; si no se detecta mejora en ese bloque de iteraciones, el sistema **genera una nueva solución factible completamente distinta** (respetando el mismo umbral mínimo de preferencias), y repite el ciclo. El sistema puede estar funcionando durante varias horas o incluso toda la noche para explorar múltiples soluciones.

Finalmente, entre las distintas soluciones válidas obtenidas, se selecciona la que presenta la **menor media de huecos por docente**, un criterio que se ha convertido en estándar para la validación de la calidad del horario. En la práctica, los mejores resultados obtenidos se sitúan en torno a **1,0–1,5 huecos semanales por profesor**, cifra considerada razonable por el equipo directivo del centro.

1. ## *Visión Propuesta (To Be)*

En el escenario futuro, se busca **agilizar la carga de datos** y mejorar la integración con fuentes existentes, además de mantener la optimización automatizada de los horarios. El flujo de trabajo propuesto para la herramienta sería el siguiente:

1. **Carga automatizada de datos maestros por Jefatura de Estudios:** En lugar de introducir a mano todos los datos de base (profesorado, cursos, grupos, asignaturas, aulas y tareas no lectivas obligatorias como tutorías o guardias), el jefe de estudios podría importarlos mediante ficheros procedentes de sistemas oficiales. Por ejemplo, la aplicación podría **obtener automáticamente** el catálogo oficial de asignaturas (con sus códigos, descripciones y horas) desde la Consejería de Educación, y **cargar la lista de profesores** desde Séneca (sistema de gestión de centros) con sus datos relevantes. Esto ahorraría tiempo y minimizaría errores, permitiendo simplemente seleccionar en la herramienta qué asignaturas se imparten y qué docentes están disponibles en el centro.
2. **Asignación de materias por parte de los departamentos:** Cada departamento didáctico introduciría qué profesores van a impartir las distintas asignaturas y a qué grupos de alumnos. Idealmente, la herramienta ofrecería una interfaz o plantillas para rellenar esta asignación, de modo que la información de qué profesor imparte cada materia/grupo se incorpore fácilmente (incluso podría **extraerse de Séneca** si allí constan los profesores asignados a cada materia/grupo). De esta forma se evitaría tener que cargar manualmente uno por uno los emparejamientos de docentes con asignaturas.
3. **Definición de asignaturas y grupos paralelos:** Durante la carga de datos, se señalarían aquellas asignaturas (y los grupos correspondientes) que deben impartirse **en paralelo**, es decir, simultáneamente en el horario. Esto cubre casos como materias optativas que se ofertan a la misma hora para distintos subgrupos, de modo que la herramienta sepa que esas clases deben coincidir temporalmente.
4. **Registro de preferencias del profesorado:** En la nueva herramienta, cada docente podría introducir directamente sus **preferencias horarias** en un módulo específico, en lugar de rellenar formularios en papel que luego haya que traducir manualmente. Así, las disponibilidades y restricciones personales de los profesores quedarían registradas automáticamente en el sistema, clasificadas por nivel de preferencia (duras/obligatorias, medias/recomendables o blandas/opcionales), listas para ser consideradas durante la generación del horario.
5. **Módulo opcional de detección de conflictos:** Antes de lanzar el cálculo del horario, la Jefatura de Estudios podría contar con una funcionalidad de **búsqueda de conflictos o depuración** de datos. Este módulo revisaría la información cargada (asignaciones, disponibilidades, etc.) en busca de incoherencias o solapamientos imposibles, alertando de errores de entrada que deban corregirse antes de la optimización.
6. **Optimización automática del horario:** Con todos los datos validados, el software generaría el horario optimizado. Al igual que en el proceso actual, el algoritmo debe **cumplir al 100% todas las restricciones duras** (factibilidad absoluta) y luego intentar satisfacer el máximo posible de restricciones blandas. La diferencia es que ahora el sistema podría aprovechar mejor las preferencias cargadas y los datos importados para optimizar. El criterio central de calidad seguiría siendo **minimizar los huecos del profesorado y maximizar sus preferencias**, junto con otros posibles criterios (p. ej., repartir equilibradamente las sesiones, evitar últimas horas para ciertas materias, etc., según las preferencias ingresadas). En resumen, la herramienta buscaría automáticamente un horario que no solo sea factible, sino también de alta calidad, reduciendo al mínimo los periodos libres y respetando al máximo las preferencias.
7. **Visualización y exportación de resultados:** Por último, el horario resultante se presentaría de forma visual e intuitiva en la aplicación, permitiendo revisar la distribución de clases y guardias. Además, se podría **exportar** el horario final a formatos útiles (por ejemplo, PDF o a la misma plataforma Séneca) para su difusión y consulta por parte del equipo directivo, profesores y resto de la comunidad educativa.

Esta visión *To Be* pretende reducir al mínimo el trabajo manual y las posibilidades de error en la preparación de datos, aprovechando fuentes existentes y automatizando pasos previos. Con ello, Jefatura de Estudios podría centrarse más en ajustar criterios pedagógicos y organizativos, dejando al software la pesada tarea combinatoria de obtener el mejor horario posible cumpliendo todas las condiciones. Las funcionalidades propuestas (importación de datos, gestión de preferencias en línea, detección de conflictos) complementarían al motor de optimización para lograr un **proceso integral más eficiente**, desde la carga inicial de información hasta la generación y entrega del horario final.


# Entidades y Conjuntos Fundamentales

En este apartado se describen las **entidades principales** que intervienen en la elaboración del horario, junto con su significado y los atributos o características relevantes de cada una. Estas entidades definen el conjunto de datos sobre el que opera el modelo de horarios del instituto:

- **Estructura Temporal (Slots de Tiempo):** La unidad temporal básica es el **periodo lectivo de 1 hora**. El horario diario matutino consta de una serie de periodos (sesiones) cada día, normalmente **6 sesiones entre las 8:15 y las 14:45**, con un recreo de 30 minutos a mitad de jornada. Todos los días lectivos (Lunes a Viernes) comparten esta misma estructura de 7 periodos. Existe una diferenciación de franjas horarias: por ejemplo, la **primera hora** del día (8:15) y la **última hora** (la sexta, terminando a 14:45) se consideran franjas *extremas* de la jornada. En este centro solo se planifica el turno de mañana, por lo que no se manejan turnos de tarde salvo el caso aislado del grupo de adultos (que se gestiona aparte). En otros centros con jornada partida (mañana y tarde), habría que considerar también los turnos y asegurar el debido descanso entre jornadas (12h entre la última clase impartida por un profesor en un día y su primera clase del día siguiente), pero aquí nos centraremos en la estructura de mañana única. Cada periodo lectivo puede albergar clases, guardias u otras actividades programadas.
- **Enseñanzas, Cursos e Itinerarios:** El instituto abarca varias etapas educativas. En **ESO (Educación Secundaria Obligatoria)** y **Bachillerato**, las enseñanzas se organizan por **curso** (por ejemplo, 1º ESO, 2º ESO, ..., 1º Bachillerato, 2º Bachillerato) y, en Bachillerato, además se diferencian **itinerarios o modalidades** (por ejemplo, Ciencias vs. Humanidades). En Bachillerato típicamente hay grupos separados por modalidad, pero en algunos casos pueden existir **grupos mixtos** donde conviven estudiantes de ambas modalidades en las asignaturas comunes. Los **Ciclos Formativos de FP** constituyen otra enseñanza con su propia organización de módulos profesionales por curso (p. ej., 1º FP Administración). Cada curso tiene un currículo que determina un conjunto de asignaturas (materias) obligatorias comunes y optativas. Las **optativas** ofrecen cierta flexibilidad: en Bachillerato, por ejemplo, hay asignaturas optativas específicas de cada itinerario (como *Dibujo Técnico* de 4 horas semanales para Ciencias, o *Literatura Universal* de 4h en Humanidades) y otras optativas comunes a ambos (p. ej., *Antropología*, de 2h semanales). En estos casos, el alumnado puede elegir entre cursar **una optativa de 4h o dos optativas de 2h** (equivalentes). Esto significa que, para hacer posible la elección, las optativas de 4h deben impartirse **en paralelo** (simultáneamente) a las dos optativas de 2h correspondientes: es decir, durante el mismo bloque horario en que un grupo de alumnos está en la asignatura de 4h, el resto estará repartido en dos asignaturas de 2h cada una. Un ejemplo concreto: en un grupo mixto de 2º Bachillerato, un alumno puede escoger *Dibujo Técnico (4h)* o bien *Antropología (2h) + Psicología (2h)*; el horario reflejará que *Dibujo Técnico* se imparte simultáneamente a *Antropología* y *Psicología*, de modo que todos los estudiantes tengan clase en ese intervalo, cada uno en la optativa que le corresponde. Esta configuración implica manejar **subgrupos optativos** que se desdoblan a partir del grupo base para esas horas.
- **Grupos y Subgrupos de Alumnos:** Un **grupo** se refiere a una clase o sección de alumnos que comparten la mayoría de sus asignaturas. Por ejemplo, "1ºA ESO" es un grupo de 1º de ESO. Cada grupo tiene un tamaño (número de alumnos) y está asociado a un curso y enseñanza (p. ej., 3º ESO, 2º Bachillerato Ciencias, etc.). En algunos casos se forman **subgrupos** dentro de un grupo para ciertas actividades: por ejemplo, los mencionados subgrupos de optativas (mixtos entre grupos) donde alumnos de distintos grupos/clases se reagrupan según la optativa elegida. Un caso particular en ESO es el programa de **Diversificación Curricular**: algunos alumnos con necesidades educativas específicas siguen un currículo adaptado por **ámbitos** (ámbito científico, ámbito sociolingüístico, etc.) en lugar de asignaturas independientes. Estos estudiantes pertenecen administrativamente a grupos ordinarios (ej. 3ºB ESO), pero salen de su grupo en ciertas franjas para recibir clases de ámbito por separado. Operativamente la herramienta informática crea un 3ºB ESO Diversificación que comparte horario con 3ºB ESO en algunas asignaturas. Como consecuencia, las asignaturas regulares del grupo deben impartirse **en paralelo** a esas clases de ámbitos de diversificación, de modo que mientras los alumnos de diversificación están con su profesor de ámbito, sus compañeros reciben clase de otra materia **que no requiera la presencia de los alumnos de diversificación**. Así nadie se queda sin clase y se evitan solapamientos indebidos. En resumen, los grupos pueden **desagruparse temporalmente** ya sea por optativas o programas especiales, generando subgrupos simultáneos que el horario debe contemplar.
- **Materias (Asignaturas) y Ámbitos:** Cada **materia** tiene asociadas un número de **sesiones semanales** que deben programarse en el horario de cada grupo que la cursa (por currículo oficial y planificación del centro). Por ejemplo, una asignatura puede tener 4 horas semanales (lo usual en troncales de Bachillerato), lo que típicamente se distribuye como 1 hora por día en 4 días distintos de la semana. En FP es común encontrar módulos (asignaturas) con **6, 7 u 8 horas semanales**, lo que implica que en 5 días hay que colocar múltiples sesiones por día o **sesiones dobles** para cubrir el total. Por ejemplo, un módulo de 7h podría impartirse en 5 días haciendo dos días con sesión doble (2 horas seguidas) y tres días con sesión simple, sumando 7. En **ESO y Bachillerato**, en cambio, la norma general es **no tener dos horas consecutivas de la misma asignatura para un mismo grupo** (por criterios pedagógicos y de atención del alumnado), por lo que las sesiones deben espaciarse en días distintos. **Excepciones:** en FP, como se mencionó, sí se permiten e incluso recomiendan dobles sesiones seguidas de la misma materia (especialmente cuando el número de horas semanales excede el número de días). También en diversificación curricular, al trabajar por ámbitos más amplios, se puede permitir que los alumnos de diversificación tengan varias horas del mismo ámbito seguidas. Además de la duración y número de sesiones, algunas materias pueden tener requisitos especiales: por ejemplo, pueden requerir ciertos **espacios** (laboratorios, talleres, gimnasio) o preferir determinadas franjas horarias. En este centro en particular, se señala que podría haber asignaturas que conviene planificar **antes o después del recreo** por su naturaleza. Por ejemplo, podría interesar que Educación Física se imparta justo tras el recreo para aprovechar que los alumnos han descansado, o al revés, evitar que Matemáticas se coloque a última hora del día porque el nivel de atención es menor (esto último se trata como preferencia blanda). Todas las materias están asociadas a **departamentos didácticos**, que son los responsables de asignar profesores a las materias y grupos.
- **Bloques: Requisitos de simultaneidad (paralelismos obligatorios):** Algunas asignaturas *deben* impartirse al mismo tiempo que otras, debido a los **desdobles y optativas**. Esto implica restricciones de sincronización: las clases que conforman un bloque optativo han de programarse en paralelo, ocupando exactamente la misma franja horaria, de modo que los alumnos se repartan entre ellas sin conflicto. *Ejemplos:*
  - Caso 1: Como se explicó, una optativa de 4h semanales tiene que coincidir temporalmente con dos optativas de 2h cada una. Para el modelo, esto puede significar que la asignatura de 4h (digamos, Dibujo Técnico) se dividirá en 2 sub-eventos de 2h cada uno, y cada uno de esos sub-eventos se vinculará a coincidir con las sesiones de las otras dos asignaturas de 2h (Antropología y Psicología). Se añade además una restricción para que **los dos sub-eventos de la asignatura de 4h no coincidan entre sí** (obviamente, una misma asignatura dividida no debe solaparse consigo misma).
  - Caso 2: Otro ejemplo es la diversificación: las clases de ámbito de diversificación de distintos grupos (ej. 3ºA y 3ºB diversificación) pueden juntarse en un mismo grupo de ámbito, lo que obliga a que, simultáneamente, 3ºA y 3ºB estén haciendo algo diferente (otra materia) con otros profesores. Esa otra materia que reciben los no-diversificados en 3ºA y 3ºB **tiene que ocurrir a la vez que el ámbito**, para que los alumnos que salieron no se pierdan nada fundamental o, visto al revés, para que no haya alumnos sin clase.
  - Caso 3: Los bloques más comunes ocurren cuando optativas de la misma duración tienen que coincidir en el mismo horario. Ejemplo: las 4 horas de francés de 3º ESO A tienen que coincidir con las 4 horas de francés de 3º ESO B y con las 4 horas de la optativa TIC de 3º ESO A y 3º ESO B. Es similar al caso 1 pero ambas optativas tienen la misma duración semanal.

En general, para cada conjunto de asignaturas definidas como paralelas (optativas cruzadas, desdobles conjuntos, religión/valores, etc.), el horario debe respetar que se impartan en la misma franja. Esto también implica que dichas asignaturas paralelas deben ser asignadas a **profesores diferentes**. El departamento al asignar profesores ya lo tiene en cuenta: por ejemplo, si dos optativas van en paralelo, no asignan ambas al mismo docente porque sería imposible impartirlas simultáneamente. El modelo así asume que eventos paralelos no comparten profesor ni grupo, solo comparten la sincronía en el tiempo.

- **Profesorado:** El instituto cuenta con un conjunto de **docentes** asignados a departamentos y con habilitación para impartir ciertas materias. Cada profesor tiene unas **cargas horarias y funciones** que condicionan su horario. La dedicación estándar de un docente a tiempo completo son **25 horas de obligada permanencia** en el centro a la semana. Estas 25 horas semanales se desglosan, por normativa regional, en aproximadamente **18 horas lectivas** (impartiendo clase efectivamente a grupos de alumnos) y **7 horas no lectivas** de obligada presencia (que incluyen guardias, reuniones, tutorías, etc.). Las **18 horas lectivas** son lo deseable, pero existe un rango legal: **cada profesor debe tener entre 18 y 21 horas lectivas por semana**. El ideal es 18; solo en casos necesarios (por ejemplo, falta de profesorado para cubrir todas las clases) se asignan 19, 20 o hasta 21 horas de clase a un docente. Si a alguien se le sube la carga lectiva por encima de 18, se le reducen proporcionalmente las otras funciones para que no exceda las 25 totales (por ejemplo, con 21 clases, tendría solo 4 horas de otras tareas). Existen situaciones especiales que reducen la carga lectiva de ciertos profesores: por ejemplo, los **tutores de grupo** dedican 1 hora lectiva a la tutoría con sus alumnos (que debe figurar en el horario) más otra hora complementaria de tutoría para tareas administrativas que *no* aparece en el horario. En la práctica, un tutor suele impartir 16 horas de su materia + 1 hora de tutoría al grupo + 1 hora de gestión de tutoría (oculta), sumando 18 horas lectivas. También, los **jefes de departamento** tienen una reducción de **3 horas lectivas semanales** por sus labores de coordinación (es decir, imparten 15 horas de clase en lugar de 18). Igualmente, los docentes mayores de **55 años** disfrutan de una reducción de **3 horas lectivas** por razones de edad, y puede haber otras reducciones otorgadas a docentes con cargos o proyectos (coordinadores, responsables de programas, etc.). Todas estas reducciones se tienen en cuenta a la hora de asignar cuántas horas de clase efectivas imparte cada profesor. Antes de elaborar el horario, la dirección asigna a cada departamento un número de grupos y horas que debe cubrir, y el **departamento distribuye las asignaturas entre sus profesores**, procurando que ninguno quede sobrecargado ni por debajo de las 18 horas lectivas estándar. Esta asignación previa (qué profesor imparte qué materia en cada grupo) se considera fija durante la confección del horario – es decir, el horario *respeta siempre* la asignación de profesores a materias ya decidida. Por normativa, no se puede asignar dos profesores distintos a la misma materia en el mismo grupo (una clase tiene un único docente titular), así que esa regla está implícitamente garantizada por la asignación departamental inicial. Además de sus clases, los profesores participan en **reuniones** y realizan **guardias** (descritas más abajo), que también ocupan huecos en su horario individual.
- **Aulas y Recursos:** El centro dispone de un conjunto de **aulas** y otros espacios educativos (laboratorios, talleres, gimnasio, salas específicas). Cada clase/grupo tiene usualmente un aula de referencia, pero los profesores pueden mover a los alumnos a diferentes espacios según la asignatura (p. ej., al laboratorio de Química, aula de Música, etc., cuando corresponda). En general, **cada aula solo puede usarse para una actividad a la vez** (no pueden programarse dos clases distintas en el mismo aula y periodo). Sin embargo, hay **excepciones puntuales**: por ejemplo, el **gimnasio** u otros espacios muy amplios a veces pueden compartir dos grupos simultáneamente (por ejemplo, dos grupos haciendo Educación Física juntos con dos profesores distintos en mitades del polideportivo). Estas excepciones se permiten cuando el espacio lo admite, aunque algunos docentes pueden **preferir no compartir** el espacio con otro grupo (lo que se manejaría como una preferencia blanda del profesor o departamento). Si el centro tuviera **varios edificios o sedes**, el uso de aulas implicaría también considerar el tiempo de desplazamiento de profesores entre edificios. En nuestro caso, **todo ocurre en un mismo edificio**, así que no hay largos desplazamientos, pero en otros centros se introduce la noción de compatibilidad espacio-tiempo: tratar de **agrupar las clases de un profesor en un mismo edificio** y, si tiene que cambiar de edificio, **asegurar un periodo libre (guardia o hueco)** para darle tiempo a moverse. Incluso se podría establecer una regla que, tras impartir una clase en un edificio concreto, **solo pueda programarse a continuación una guardia y no otra clase**, para facilitar ese cambio. En este instituto específico no es necesario debido a la unicidad del edificio principal, pero conviene mencionarlo como consideración general de la herramienta.
- **Guardias (Servicios de Vigilancia):** Las **guardias** son periodos en los que ciertos profesores, en vez de dar clase, están asignados a la **vigilancia y atención de incidencias** del centro. Hay distintos tipos de guardia: típicamente **guardias de pasillo** (profesores disponibles para sustituir ausencias o atender emergencias durante las clases, vigilando pasillos), **guardias de recreo** (durante el descanso, vigilando patios y zonas comunes) y **guardias de convivencia u otros servicios** (según las necesidades del centro). Las guardias cuentan dentro de las 25 horas semanales de trabajo de un profesor y deben aparecer planificadas en su horario individual. En este instituto, por normativa y tamaño, se ha determinado que **cada hora de clase debe haber al menos 4 profesores de guardia de pasillo disponibles**. Durante el recreo se exige un mínimo de **5 profesores de guardia** vigilando. En la práctica, el centro ha optado por asignar **6 docentes de guardia en cada recreo** para mayor seguridad, y cubrir las guardias de pasillo con **3 profesores de guardia en primera y última hora**, y **4 en el resto de las horas intermedias**. Cada **profesor tiene un número determinado de guardias semanales** que debe cumplir, distribuidas entre pasillo, recreo, etc., en función de su horario disponible y de la rotación equitativa que establezca el centro (por ejemplo, un profesor podría tener 1 guardia de recreo y 1 de pasillo a la semana asignadas). Estos números son fijados por Jefatura y se toman como datos de entrada (p. ej., "cada profesor X hará 2 guardias de pasillo y 1 de recreo por semana"). A la hora de elaborar el horario, por tanto, las guardias se tratan como "actividades" que hay que asignar a profesores libres en determinados periodos para alcanzar el mínimo de personal de vigilancia requerido en cada franja. Son, en efecto, eventos que compiten con las clases por los slots libres de los docentes, pero con la diferencia de que un profesor en guardia no tiene un grupo asignado ni ocupa un aula, sino que está de guardia general.
- **Reuniones y Otras Actividades Fijas:** Además de clases y guardias, el horario semanal incluye algunas reuniones del profesorado que **deben programarse en un hueco común** para todos los implicados. En este instituto, destaca la **reunión de tutores**: semanalmente, todos los tutores de grupo se reúnen con Jefatura de Estudios y el Departamento de Orientación para coordinar aspectos de tutoría y seguimiento del alumnado. Esta reunión de tutores, orientación y equipo directivo **debe figurar en el horario general**, es decir, todos esos profesores (los tutores, el orientador y jefatura) necesitan tener libre una hora común a la semana para asistir a dicha reunión. Dado que participan muchos docentes, es una restricción global importante: implica que, en ese periodo de reunión, ninguno de esos profesores puede tener clase asignada. Por tanto, sus grupos en ese periodo deberán estar atendidos por otros.

A partir de estas entidades se derivan las "lecciones" o **eventos** que deben ubicarse en el calendario semanal: cada combinación de grupo-materia que requiere X sesiones semanales es un conjunto de X eventos a programar, cada guardia de un profesor es otro evento que asignar, y así sucesivamente. El siguiente paso es detallar las **restricciones** que rigen cómo se pueden ubicar estos eventos en el horario.

# Restricciones

La sección de Restricciones describe las condiciones que rigen la construcción de un horario factible, abarcando tanto requisitos ineludibles como preferencias a optimizar. En este modelo se distingue entre restricciones “duras” y restricciones “blandas”. Las primeras abarcan condiciones obligatorias derivadas de la normativa, la estructura académica o limitaciones técnicas, mientras que las segundas corresponden a criterios de calidad o preferencias cuya satisfacción mejora el horario. La separación de estos dos tipos de restricciones es fundamental para garantizar la viabilidad y calidad del modelo. Las restricciones duras aseguran el cumplimiento de todos los requisitos críticos que hacen válido un horario (por ejemplo, normativas legales y disponibilidad de recursos), mientras que las restricciones blandas se integran en la función objetivo como penalizaciones o incentivos. Esto permite evaluar y optimizar la calidad del horario sin descartar soluciones viables por incumplir preferencias secundarias.

* ## *Restricciones Duras (Obligatorias)*

Las **restricciones duras** son las condiciones que **deben** cumplirse sí o sí en cualquier horario válido. Provienen de la normativa educativa, de límites físicos o lógicos, o de decisiones organizativas innegociables. Violar cualquiera de estas restricciones invalida el horario. A continuación, se enumeran las principales restricciones duras aplicables, explicando el motivo de cada una y proporcionando ejemplos:

- **Cobertura de sesiones obligatorias:** Todas las sesiones lectivas exigidas por el currículo **deben ser programadas**. Es decir, cada asignatura de cada grupo tiene que aparecer en el horario el número de veces por semana que le corresponda. *Ejemplo:* si 3ºESO A debe tener 4 clases de Matemáticas a la semana, en el horario de 3ºA aparecerán exactamente 4 sesiones de Matemáticas en distintos días. **Matemáticamente:** cada "lección" (evento de clase grupo-materia) ha de asignarse a **exactamente un periodo** de la semana, no puede quedar sin ubicar ni duplicarse. Desde un punto de vista de la programación matemática habría que incluir dos conjuntos de restricciones: la suma de todas las sesiones programadas en la semana tiene que ser exactamente igual a un valor y la suma de las sesiones programadas en cada uno de los días tiene que ser menor o igual que otro parámetro.
- **Bloques no simultáneos para un mismo grupo:** Un **grupo de alumnos no puede tener dos bloques a la misma vez**. Dicho de otro modo, en cada periodo del horario, cada grupo tendrá asignado un solo bloque. Si el bloque contiene una asignatura troncal significará que todos los alumnos del grupo tienen a la vez la misma asignatura. Si el bloque está formado por varias optativas significará que el grupo se desdobla y cada alumno asistirá a su optativa en su correspondiente aula.
- **No solapamiento de profesor:** Un **docente no puede estar en dos lugares a la vez** impartiendo clase. Por tanto, un mismo profesor no puede tener asignadas dos sesiones simultáneas. *Ejemplo:* la profesora María no puede estar dando Matemáticas en 2ºA y a la vez Matemáticas en 3ºB durante la 2ª hora del martes; si María imparte ambas asignaturas, deberán ubicarse en horas distintas. Esto aplica tanto a clases con alumnos como a reuniones y guardias: si un profesor debe asistir a la reunión de tutores, no se le puede programar una clase en ese mismo periodo.
- **Capacidad del gimnasio:** En el gimnasio no podrán coincidir un número ilimitado de grupos a la misma hora, hay una capacidad máxima.
- **Asignación profesor-materia fija:** Como se mencionó, cada clase (grupo-materia) tiene un profesor asignado de antemano por el departamento, y **esa asignación es fija** en la planificación horaria. **No se permiten dos profesores para la misma materia y grupo** por normativa, lo que significa que, si una clase de 2ºESO B de Geografía la imparte la profesora Ana, todas las sesiones de Geografía de 2ºESO B en la semana deberán figurar con Ana como docente. El horario debe respetar esta relación, no puede cambiar de profesor a mitad de semana para la misma asignatura. No hace falta incluir está restricción en el modelo, esto está garantizado porque cada evento “grupo-materia” viene ya asociado a un docente concreto.
- **Límite de horas lectivas por profesor (carga semanal):** Cada docente a tiempo completo debe tener entre **18 y 21 horas de clase a la semana**, nunca menos de 18 ni más de 21. Este es un rango legal obligatorio. No hace falta incluir está restricción en el modelo, esto siempre se respeta ya que los profesores tienen asignadas sus asignaturas antes de realizar el horario.
- **Distribución diaria máxima de un profesor:** Ningún profesor puede impartir más de **5 horas de clase en un mismo día**, acorde a la jornada lectiva máxima por docente. Dado que el horario de mañana tiene 6 periodos, eso significa que cada docente tiene al menos un periodo sin clases al día (que puede ser guardia, tutoría, reunión, hueco indeseable o un hueco al inicio al principio o al final de la jornada indicando que el profesor entrará después o saldrá antes, que es lo que más desean).
- **Distribución diaria mínima de un profesor:** En general se procura que cada docente tenga al menos **un número parametrizado de horas de clase cada día** que viene al centro (para la mayoría de los profesores es de 2 horas al día). Es decir, se evita que un profesor venga un día únicamente para dar 1 clase suelta. Esta restricción depende del profesor, ya que podría haber excepciones, por ejemplo, si un profesor con poca carga lectiva trabaja solo uno o dos días con pocas horas. *Ejemplo:* si un profesor solo imparte 3 días a la semana, se concentrará su horario para no hacerle ir 4º día por 1 sola clase aislada; en lugar de eso, se le podría poner 2 clases en 3 días y dejarlo libre el cuarto día, lo cual implica que su mínimo de horas de clase al día es 0.
- **Secuenciación de clases prohibidas o requeridas:** Hay restricciones temporales sobre cómo se colocan las sesiones de una misma materia durante la semana. **En ESO/Bachillerato no se permite** que una materia tenga **2 sesiones el mismo día** con el mismo grupo. Por tanto, el horario debe evitar asignar, por ejemplo, Lengua castellana a 2ºESO A en 1ª y 2ª hora del lunes consecutivamente. **En Ciclos Formativos**, en cambio, sí se **permiten sesiones dobles** (dos periodos seguidos de la misma asignatura con el mismo grupo) y de hecho en algunos módulos largos es **necesario** para alcanzar las horas semanales. Así que, para FP, no se aplica la prohibición; es más, podría haber una restricción obligatoria de *tener* ciertas dobles sesiones. *Ejemplo:* en un módulo de 8h/semana, necesariamente dos de los días habrá 2h seguidas (porque con 5 días no se pueden distribuir 8 horas sin doblar al menos en 3 días). El modelo debe manejar estas diferencias: esencialmente, cada materia/grupo viene con indicación de si admite o requiere dobles sesiones. **Nota:** en diversificación curricular, se *permite* que un mismo ámbito ocupe varias horas seguidas para esos alumnos, ya que funcionan distinto a asignaturas independientes.
- **Descanso obligatorio entre jornadas (caso de turno partido):** Aunque en este centro casi todos los docentes trabajan solo de mañana, en centros con turnos de mañana y tarde se exige que haya al menos **12 horas de descanso** entre que un profesor termina su última clase de un día y comienza la primera del día siguiente. En términos prácticos, si un docente trabaja por la tarde un día (salida a las 22:00) no se le puede poner a primera hora de la mañana siguiente (8:15) porque apenas habrían pasado 10 horas. Esta restricción asegura un mínimo descanso de 12 horas. En nuestro instituto, solo afectaría si algún profesor diera clase en el grupo nocturno de adultos; de ser así, esa persona no debería tener la primera hora lectiva al día siguiente. Como política, los profesores de ese grupo de adultos probablemente no tengan clase a primera hora de la mañana siguiente, o directamente sean distintos docentes no involucrados en el turno de mañana, para evitar conflictos. **Nota**: Inicialmente está restricción no se va a tener en cuenta.
- **Cobertura de guardias y mínimos de vigilancia:** Como se explicó en Entidades, en cada periodo del horario se necesita un cierto número de profesores **de guardia** (especialmente para pasillos y recreos). Esto se traduce en restricciones duras de **cobertura mínima de guardias**: *cada hora de clase*, debe haber al menos 3–4 docentes asignados a guardia de pasillo (4 en horas normales, aunque la primera y última hora se conforman con 3 en nuestro caso). *Cada recreo*, debe haber al menos 5 (el centro pone 6) profesores en guardia de patio. Por tanto, el modelo debe garantizar que, para cada periodo, la cantidad de profesores asignados a guardia en ese periodo *≥ mínimo requerido*. Estas guardias salen de los profesores que no tengan clase en ese momento. Además, **cada profesor tiene un número predeterminado de guardias semanales** que debe cumplir, por lo que también hay una restricción por profesor: asignarle exactamente ese número de guardias (desglosadas por tipo si se requiere) a lo largo de la semana. *Ejemplo:* si al profesor Juan se le han asignado 2 guardias de pasillo y 1 de recreo por semana, el horario final debe mostrar a Juan efectivamente 2 horas en la columna "guardia de pasillo" y 1 en "guardia de recreo", ni más ni menos. Y simultáneamente, cada hora lunes a viernes 1ª hora deben aparecer 3 profesores de guardia, etc.
- **Asistencia a reuniones obligatorias:** Para cualquier reunión o evento fijo colectivo que la dirección marque dentro del horario, debe garantizarse que **todos los participantes estén libres en esa franja**. En nuestro caso, la reunión de tutores semanal implica que los tutores + orientación + jefatura estén disponibles. Eso establece una restricción para que no se asignen clases ni guardias a este conjunto de profesores en algún periodo, para así poder llevar a cabo la reunión.
- **Conciliación laboral:** Los profesores con **derecho a conciliación familiar** (p. ej., con hijos menores de 12 años) tienen por normativa sus preferencias de horario **garantizadas**; si alguien solicita un determinado turno por cuidado de hijos, esa preferencia se convierte de facto en restricción dura (se **debe** cumplir).

* ## *Restricciones Blandas (Preferencias y Criterios Flexibles)*

Las **restricciones blandas** son criterios deseables, preferencias y lineamientos pedagógicos que **no tienen carácter obligatorio absoluto**, pero cuya satisfacción mejora la *calidad* del horario. Incumplir una restricción blanda no invalida el horario, pero genera una cierta penalización o insatisfacción. El objetivo es cumplir el mayor número posible de ellas y, en caso de conflicto, priorizar las más importantes. En esta sección se listan las principales restricciones blandas que maneja el instituto, junto con su justificación y ejemplos:

- **Preferencias horarias del profesorado:** Cada docente suele indicar franjas preferidas o a evitar en su horario. Es muy común que expresen deseos como "no dar clase a primera hora" o "no tener la última hora los viernes", o "compactar mi horario para salir temprano algún día". Estas preferencias se recaban a principio de curso. El centro **intenta respetarlas al máximo**, pero **no todas podrán satisfacerse simultáneamente** – por ejemplo, es imposible que *todos* los profesores tengan libre la última hora del viernes, alguien tendrá que ceder y dar clase en ese periodo. Por ello, la persona que elabora el horario debe decidir qué preferencias se consideran *duras* (innegociables) y cuáles *blandas* (se satisfarán solo si es posible), e incluso asignar distintos **niveles de prioridad**. En la práctica, muchos horarios distinguen entre preferencias **fuertes**, **medias** y **suaves** del profesor. Un ejemplo de preferencia fuerte podría ser "no puedo trabajar los miércoles por la tarde porque curso estudios, o por conciliación familiar". Un ejemplo de preferencia media: "preferiría no tener clase a 1ª hora los lunes". Y suave: "me gustaría no tener nunca clase a última hora". El horario final procurará cumplir primero las fuertes de todos los docentes, luego las medias en la medida de lo posible, y finalmente las suaves si queda margen. Cabe resaltar que los profesores generalmente *prefieren tener algún hueco libre* en su jornada antes que ver ignoradas sus peticiones personales. Es decir, un docente suele tolerar mejor tener, por ejemplo, una hora muerta a mitad de mañana que le asignen clase en una hora que había pedido libre por otra razón. En resumen, las preferencias del profesorado son un conjunto de restricciones blandas muy importantes que el algoritmo debe tener en cuenta, minimizando las violaciones (asignar horas no deseadas) y posiblemente distribuyéndolas equitativamente cuando son inevitables (no siempre mencionado explícitamente, pero implícito en la justicia organizativa).
- **Minimizar huecos en el horario de los profesores:** Un *hueco* es un periodo libre entre dos clases en el mismo día de un profesor. Aunque los huecos pueden servir para descansar o preparar clases, en exceso son considerados algo negativo porque prolongan la jornada inútilmente. El criterio general es **minimizar el número total de huecos** en el horario de los docentes, así como minimizar el número de profesores que tengan huecos y el máximo número de huecos que sufra un mismo profesor. Muchas veces se mide la *media* de huecos por profesor y se intenta que sea lo más baja posible. Un buen horario suele lograr alrededor de 1 a 1.5 huecos de media por profesor, lo cual implica que algunos tendrán 0 o 1 y unos pocos quizás 2 o 3, pudiendo darse algún caso aislado de 6 o 7 huecos. Evitar huecos significa, por un lado, **compactar** las 25 horas semanales de obligada presencia de cada profesor lo máximo. Esta preferencia de compactación está muy extendida: *"prefiero tener 4 seguidas y luego irme, a tener 2 clases, un hueco y luego otra clase"*. El modelo penalizará cada hueco en el objetivo para que, si puede eliminarse reorganizando, lo haga. *Ejemplo:* si el profesor Luis tiene clase 1ª, 2ª y 5ª hora el martes, tiene **dos huecos** (3ª y 4ª libres). Quizá sea posible mover la clase de 5ª a 3ª para que le quede 1ª-2ª-3ª seguidas y luego se pueda marchar a casa, evitando esos huecos muertos. Esa mejora sería valorada positivamente. Dos horas de hueco seguidas se contabiliza como dos huecos.
- **Escalonamiento:** Desde el punto de vista de los alumnos y la pedagogía, se considera beneficioso **dispersar las sesiones de una asignatura a lo largo de la semana**, evitando concentrarlas en días contiguos. Esto ayuda a reforzar el aprendizaje mediante repasos frecuentes y no saturar al estudiante con la misma materia de golpe. Por tanto, se prefiere no tener la **misma asignatura dos días consecutivos** (salvo que, por tener 5h/semana, sea inevitable que ocupen casi todos los días). *Ejemplo:* supongamos que Biología de 3ºB tiene 4 sesiones semanales. Una distribución lunes-martes-miércoles-jueves sería subóptima (4 días seguidos); sería preferible lunes-martes-jueves-viernes (aquí hay miércoles de descanso en medio). El algoritmo valorará más positivamente la segunda distribución.
- **Criterios pedagógicos:** También se prefiere que no caiga **siempre la misma asignatura en la última hora del día**. Si Matemáticas de 4ºA está siempre a 6ª hora, los alumnos siempre la reciben cansados; sería mejor alternar que a última hora unas veces tengan Matemáticas, otras Historia, etc. Estas consideraciones se implementan como restricciones blandas específicas, ya sea mediante reglas (por ejemplo, "no última hora para matemáticas") o penalizaciones ("penalizar si la misma materia aparece en días consecutivos").
- **Preferencias de espacios:** Aunque no fue muy destacado en la reunión, hay preferencias personales en cuanto a los espacios, por ejemplo, **profesores que prefieren no compartir el gimnasio** con otro grupo, así que, si es posible y el horario lo permite, se evitará colocar dos grupos juntos en el gimnasio cuando alguno de los profesores involucrados tenga esa preferencia. No siempre se podrá, a veces por falta de horas libres el gimnasio debe compartirse, pero se intentará acomodar.

# Criterios de Optimización (Objetivos)

Dado que no todas las restricciones blandas se podrán satisfacer al 100%, el problema del horario se convierte en un compromiso donde hay que **optimizar** ciertos objetivos. En términos de modelado, definimos una **función objetivo** (o varias jerarquizadas) que mide la "calidad" del horario. El objetivo es encontrar, entre todos los horarios factibles (que cumplen duras), aquel que **maximiza la satisfacción** o, equivalentemente, **minimiza las penalizaciones** por incumplir las blandas. A continuación, se resumen los criterios de optimización principales, alineados con las restricciones blandas ya explicadas:

- **Criterio 0: Factibilidad y Cobertura.** La condición previa a cualquier proceso de optimización es la obtención de un horario factible. Esto implica que no se produzcan violaciones de las restricciones duras y que se garantice la cobertura íntegra de todas las sesiones requeridas. Este criterio puede interpretarse de dos formas: (i) descartar de manera estricta cualquier solución no factible, o (ii) permitir soluciones inicialmente inviables, pero señalando las incompatibilidades mediante advertencias para su posterior corrección.
- **Criterio 1: Calidad del Horario del Profesorado.** Este es típicamente el conjunto de objetivos blandos más importante. Incluye:

  - **Minimizar el número total de huecos (ventanas) del profesorado.** Se busca que el **número medio de huecos por profesor por día** sea lo más bajo posible. Asimismo, minimizar el **máximo de huecos** que tenga cualquier profesor, y el **número de profesores con algún hueco**. En definitiva, reducir al mínimo los periodos vacíos en la jornada de cada docente.
  - **Respetar preferencias individuales.** Cada violación de una preferencia de un profesor (ya sea fuerte, media o suave) contribuye a un "coste". Las violaciones de preferencias fuertes idealmente deben ser cero (o altísimo castigo si ocurren), las medias con un peso intermedio, las suaves con uno menor. El objetivo incluye minimizar el peso total de preferencias no satisfechas.
- **Criterio 2: Criterios Pedagógicos Específicos.** Aquí incluimos:

  - **Dispersión de sesiones de cada materia.** Penalizar si una asignatura aparece en días contiguos para el mismo grupo (violación de la dispersión mínima). Recompensar si están distribuidas con días de por medio cuando posible.
  - **No siempre última hora.** Penalizar si una materia “difícil” está siempre en la última franja en un grupo.
  - **Evitar sesiones inmediatamente post/pre-recreo para ciertas materias.** Si, por ejemplo, la asignatura X se marcó con preferencia "no después del recreo", penalizar si se coloca después del recreo. Lo mismo antes.
- **Criterio 3: Guardias.**

  - **Cobertura de guardias cumplida con holgura.** Si hay margen, mejor poner 1 profesor extra de guardia que quedarse corto. Esto en realidad es duro (no se puede estar corto), pero la "holgura" puede ser blanda: no es necesario excederse, pero a veces tener un profesor de guardia adicional (si está libre) podría verse bien.

La combinación de criterios de calidad puede abordarse de diferentes formas en la formulación del problema. Una opción clásica es integrar todos los criterios en una única función objetivo mediante un sistema de ponderaciones, mientras que otra es emplear un esquema lexicográfico, estableciendo un orden jerárquico de prioridades. Sin embargo, en este contexto resulta especialmente relevante un planteamiento biobjetivo, en el que se priorizan de manera simultánea dos aspectos fundamentales: (i) la satisfacción de las preferencias horarias del profesorado, y (ii) la minimización de los huecos en su jornada laboral. Bajo este enfoque, el modelo busca generar horarios que, además de ser factibles, equilibren adecuadamente estas dos metas principales. Métodos como la programación por metas permiten establecer umbrales deseables (por ejemplo, “cumplir al menos el 90 % de las preferencias docentes” y “garantizar un máximo de un hueco por día en promedio”), tratando de alcanzarlos de forma conjunta. En última instancia, el resultado óptimo será aquel horario que, respetando todas las restricciones duras, maximice la calidad global atendiendo a estos dos criterios prioritarios para el profesorado.

# Datos de Entrada (Inputs) Necesarios

Para poder generar un horario con todas las consideraciones anteriores, es necesario recopilar y suministrar al sistema una serie de **datos de entrada** completos. A continuación, se enumeran todos los inputs que el centro debe preparar o que idealmente la herramienta debe poder importar de sistemas existentes, junto con ejemplos o detalles relevantes:

- **Listado de asignaturas impartidas en el curso:** Todas las materias que finalmente se van a ofrecer en el centro, tras el proceso de matriculación. Esto incluye las obligatorias de cada curso y las optativas que el centro decida impartir en base a las solicitudes de alumnos. *Ejemplo:* Matemáticas, Lengua, Inglés para ESO; Física, Química, Historia, etc., para Bachiller; Módulos específicos para FP; Optativas como Francés, Cultura Científica, etc. Cada asignatura vendrá con información como su **nombre**, posiblemente un **código oficial**, el **curso o cursos** donde se imparte, y su **carga horaria semanal** (número de sesiones por semana). Por ejemplo: "Matemáticas 3ºESO – 4 horas semanales".
- **Listado de cursos y grupos:** Todos los grupos de alumnos del centro que requieren horario. Por ejemplo: 1ºESO A, 1ºESO B, ..., 4ºESO A, 4ºESO B, 1ºBACH A (Ciencias), 1ºBACH B (Humanidades), etc., hasta incluir Ciclos Formativos (1ºFP Adm, 2ºFP Adm, etc.) y el grupo de Adultos (si se considerase). Para cada grupo, se puede indicar el curso al que pertenece, el número de alumnos, y su *aula de referencia* si tiene una. También si participa en algún programa especial (por ej., "3ºESO B – programa diversificación"). Esto define la estructura de la enseñanza que el horario debe cubrir.
- **Relación de asignaturas por grupo (matriz grupo-materia):** Especifica *qué materias cursa cada grupo* y cuántas horas semanales de cada una. Esto deriva del currículo: p. ej., 2ºESO A: Matemáticas (4h), Lengua (4h), Inglés (3h), Educación Física (2h), etc. Incluye optativas asignadas: por ejemplo, "2ºBACH A (Ciencias) cursa Dibujo Técnico 4h, mientras 2ºBACH B (Hum) cursa Literatura 4h, y ambos comparten Antropología 2h como optativa común". De esta relación se obtiene la lista de **"lecciones" pendientes de programar**: cada par grupo-materia con n horas genera n eventos que hay que ubicar.
- **Profesor asignado a cada grupo-materia (asignación docente):** Para cada elemento de la matriz anterior (cada clase a impartir), indicar **qué profesor la imparte**. Por ejemplo: 2ºESO A – Matemáticas (4h) – profesora García; 2ºESO A – Inglés (3h) – profesor López, etc. En algunos casos, un profesor imparte la misma materia a más de un grupo (p. ej., el mismo profe da Física a 1ºBACH A y 1ºBACH B). Esta asignación normalmente la realiza cada departamento equilibrando cargas, y es un input crucial ya que el algoritmo no distribuye materias entre profesores, sino que ya recibe quién da qué.
- **Número de sesiones semanales por asignatura y reglas de distribución:** Para cada asignatura del centro (por curso), indicar el número de horas semanales y, si es relevante, cómo se suelen distribuir en la semana. Por ejemplo: "4 horas semanales -> 1 sesión al día en 4 días distintos"; "8 horas semanales (FP) -> 2 horas en 4 días (dobles)".
- **Lista de periodos (slots) disponibles:** Es necesario definir con precisión los periodos temporales sobre los que se construirá el horario. En nuestro caso, el turno de mañana comprende 5 días lectivos (lunes a viernes) con 6 franjas horarias por día (1ª a 6ª hora), lo que supone un total de 30 slots semanales destinados a clases o guardias. Adicionalmente, debe considerarse la media hora del recreo, que, aunque no constituye un periodo lectivo en sí mismo, sí es un bloque temporal crítico, pues en él debe organizarse la presencia de un número mínimo de profesores de guardia cada día. Por tanto, el recreo se integra en la planificación como un slot específico para la cobertura de vigilancia, aunque no aparezca en los horarios de clase del alumnado. En conjunto, esta estructura temporal define la malla base sobre la que se programan clases, guardias y reuniones, y constituye parte de la configuración general del problema.
- **Disponibilidades e indisponibilidades horarias de profesores:** Esto recoge, para cada profesor, las franjas en las que *no puede* o *no quiere* trabajar. Pueden estar marcadas a tres niveles (duras, medias, blandas). Por ejemplo: el profesor Martínez no está disponible los miércoles a última hora (quizá porque tiene que recoger a sus hijos del colegio), lo que esa sería una disponibilidad *dura* (no se le asigne nada ahí). La profesora Gómez prefiere no madrugar los lunes (preferencia media). El profesor Díaz tiene tratamientos médicos los martes de 12:00 a 13:00 – indisponibilidad dura en martes 4ª hora. Todas estas franjas prohibidas o indeseadas por profesor se deben volcar para que el motor respete o penalice según corresponda. También incluye los casos de profesores que *solo trabajan turno de mañana o tarde*: en nuestro centro todos salvo los del grupo adulto trabajan de mañana, pero si uno fuera exclusivamente de tarde, su disponibilidad de mañana sería nula (no se le asigna nada de mañana).
- **Preferencias/incompatibilidades por asignatura:** Similar al anterior, pero para las materias. Por ejemplo: "No impartir matemáticas última hora del día" (preferencia dura), "Educación Física requiere que el profesor tenga 5 min extra para cambiarse, así que si va antes del recreo mejor" (eso sería un detalle fino). Cualquier restricción de este tipo se debe enumerar. En las notas se mencionó que es *posible* que algunas asignaturas deban planificarse antes o después del recreo, sin concretar; esto sugiere que la dirección podría marcar ciertas materias con preferencia horaria (por ejemplo, Educación Física siempre 1ª hora tras recreo). Si existieran, se incluirían aquí con su nivel de preferencia.
- **Número de guardias por profesor y por tipo:** Es un dato que suele decidir Jefatura en función de las 7h no lectivas de cada uno. Se debe especificar cuántas **guardias de pasillo** tiene asignadas cada profesor, cuántas **guardias de recreo**, y cuántas de **convivencia/otros** (si aplica). Por ejemplo: Profesor A – 2 guardias pasillo + 1 recreo; Profesor B – 1 pasillo + 1 recreo; Profesor C (jefe de estudios) – 0 guardias porque está exento, etc. Esta distribución internamente suele hacerse intentando repartir esas 7 horas no lectivas: además de guardias, cuentan reuniones, tutoría, etc. En promedio, un profesor con 18h lectivas tendrá 4-5 guardias semanales (sumando tipos) porque las otras horas se le van en reuniones y otras tareas no planificadas. Pero es importante introducirlo tal cual se quiere en el horario.
- **Requisitos mínimos de guardias por franja:** Indicar, para cada hora del día (o al menos cada tipo de franja), cuántos profesores de guardia deben asignarse. Por ejemplo: "1ª hora: 3 guardias pasillo; 2ª hora: 4 guardias pasillo; ... recreo: 6 guardias patio; etc." Esto puede venir de la normativa (5 mínimos, pero ajustado al centro como vimos). Estos valores son usados por el modelo para asegurarse de cubrirlos.
- **Listado de reuniones con participantes:** Especificar cada evento tipo reunión que deba programarse y quiénes asisten. En nuestro caso: "Reunión de Tutores – participantes: todos los tutores de curso + Jefatura + Orientador". Si hubiera reunión de departamento: "Reunión Departamento Matemáticas – participantes: 5 profesores (X, Y, Z, ...)". Cada reunión planificada en horario lectivo es un evento a ubicar que bloquea a esos participantes.
- **Listado de aulas y asignación curso–materia–aula:** Lista de todas las aulas y espacios disponibles en el centro, indicando sus características (capacidad, equipamiento, uso específico) y posibles indisponibilidades horarias. Ejemplo: “Laboratorio de Física – no disponible martes 3ª hora (limpieza)” o “Sala de Usos Múltiples – ocupada lunes 1ª hora por acto semanal”. Además, se recoge la asignación previa de cada asignatura y grupo a un aula determinada, cuando sea fija. Por ejemplo: “Educación Física 2ºESO A – Gimnasio”, “Música 1ºESO B – Aula de Música”, “Biología 4ºESO C – Laboratorio de Ciencias”, “Aula general 3ºESO B – A3B”. Esta información se considera un dato de entrada y no se modifica en la planificación: el modelo únicamente debe programar las sesiones en el tiempo respetando las aulas asignadas y evitando solapamientos o usos indebidos.
- **Compatibilidades de paralelismo (parámetros de optativas/desdobles):** Hay que introducir qué asignaturas deben ir paralelas con cuáles. Esto podría ser una lista de conjuntos: p. ej., "{Dibujo Técnico 2ºBach C, Antropología 2ºBach (mixto), Psicología 2ºBach (mixto)} son simultáneas". O "{Ámbito Sociolingüístico 3º diversificación, Matemáticas 3ºA, Lengua 3ºB} simultáneas". Cada conjunto indica que esos eventos deben tener el mismo horario. Nota: si las cargas horarias difieren (4h vs 2+2), éstas se pueden dividir: en el ejemplo de 4h vs 2h+2h, se partiría la de 4h en dos sub-eventos de 2h, y se añade una restricción para que esos sub-eventos no coincidan entre sí, pero cada uno coincida con una de las 2h optativas correspondientes. Estos detalles se traducen a parámetros que el algoritmo entienda para sincronizar horarios.

En resumen, la herramienta necesita **toda la información académica y de organización del centro** antes de poder calcular el horario. En la práctica, buena parte de estos datos ya existen en sistemas administrativos (p. ej., la aplicación Séneca de la Junta de Andalucía contiene el catálogo de asignaturas y los datos de profesores). Sería conveniente que la herramienta de horarios pudiera **importar o rellenar automáticamente** muchos de estos datos para ahorrar tiempo y errores manuales. Por ejemplo, sería deseable que el software pudiera:

- **Importar el catálogo oficial de asignaturas** de la Consejería de Educación (con sus códigos, descripciones y horas) y permitir al centro simplemente seleccionar cuáles se imparten.
- **Importar la lista de profesores desde Séneca** (el sistema de gestión de centros) con sus nombres, códigos y si es posible sus especialidades.
- Facilitar una **interfaz para cargar las preferencias** de los profesores directamente en la herramienta, en lugar de tener que traducir formularios en papel a parámetros manualmente.
- Permitir igualmente cargar de forma semiautomática la **asignación de materias a profesores** que los departamentos han decidido, quizás mediante plantillas o extrayendo datos de Séneca si allí constan los profesores-tutores de cada grupo/materia.

Estos "deseos" sobre la herramienta apuntan a una mejor integración con los sistemas existentes y a simplificar el preproceso de introducir datos. En nuestro caso, asumiremos que se ha introducido todo correctamente en el formato requerido. Con todos estos inputs, el algoritmo puede construir el modelo y buscar la mejor asignación de eventos a slots.


# Resultados Esperados (Outputs)

El **output principal** del problema es, naturalmente, un **Horario completo** para el instituto que especifique quién (profesor), qué (actividad), cuándo (día y periodo) y dónde (aula) en cada sesión. En otras palabras, el resultado es la asignación de cada evento (clase, guardia, reunión) a un espacio-tiempo concreto cumpliendo las restricciones. Este horario se suele presentar en varios formatos:

- **Horario por grupo (alumnado):** Para cada grupo de alumnos, una tabla de 5 días × 6 horas indicando qué asignatura tienen en cada periodo, y con qué profesor y en qué aula. Por ejemplo, el horario de 2ºESO A podría mostrar Lunes 1ª: Matemáticas (Prof. X, Aula 12); Lunes 2ª: Inglés (Prof. Y, Aula 12); etc. Esto permite a los alumnos saber qué clase toca y dónde cada día.
- **Horario individual de cada profesor:** Listando, para cada profesor, sus clases y actividades por día/periodo. Ejemplo: Prof. García – Lunes: 1ª Matemáticas 3ºB, 2ª guardia pasillo, 3ª libre, 4ª Matemáticas 2ºA, 5ª libre, 6ª Matemáticas 2ºA; etc. De aquí el profesor ve cuándo imparte clase, cuándo tiene guardia, reuniones, y sus huecos.
- **Listados de guardias y reuniones cubiertas:** Por ejemplo, una tabla por día indicando qué profesores están de guardia cada hora, para comprobar que se cubren los mínimos. Y confirmación de que la reunión de tutores (u otras) quedó fijada tal día a tal hora, con la lista de asistentes sin conflicto.

Finalmente, un output no menos importante es que el horario generado sea **exportable o comunicable**. Sería deseable que la solución se pudiera volcar al sistema oficial (p. ej., **exportar a Séneca** en formato establecido, o en un formato estándar como XHSTT/XML) para su difusión y registro oficial. Aunque esto es más una funcionalidad de la herramienta que del modelo en sí, vale la pena mencionarlo: al final, el horario debe poder imprimirse, difundirse a profesores/alumnos y subirse a las plataformas correspondientes.

# Métricas

Además de estos horarios en formato humano, el output puede incluir **indicadores de calidad** o métricas derivadas del horario final para evaluar cómo de bien se cumplieron los criterios blandos.

- **Número total de huecos de profesor** y promedio de huecos por profesor.
- **Listado de profesores con más huecos** (p.ej., "Profesor Z tiene 3 huecos semanales, es el máximo").
- **Distribución de cargas**: cuántos profesores con 18h, con 19h, 20h, 21h de clase.
- **Cumplimiento de preferencias**: cuántas preferencias duras de profesores se violaron (ideal 0), cuántas medias no satisfechas, etc.
- **Uso de últimas horas**: porcentaje de profesores que logran libre el viernes última hora, etc.
- **Uso de espacios especiales**: por ejemplo, laboratorios utilizados X% del tiempo disponible.
- **Balance de guardias**: si todos los profesores cumplen exactamente sus guardias asignadas, etc.

Estas métricas sirven para justificar que el horario es "bueno" o para detectar puntos de mejora (p.ej., si un profesor quedó con muchos huecos, quizá intercambiando alguna clase con otro se podría arreglar, etc.). En la práctica, como el algoritmo iterativo ya persiguió minimizar huecos, el horario seleccionado será el que ya optimiza esas métricas centrales.

En conclusión, esta especificación DERCIOM ha cubierto todos los aspectos del problema de horarios: descripción del contexto y objetivos, definición de entidades involucradas, listado de restricciones duras indispensables, identificación de restricciones blandas y criterios de optimización, requisitos de datos de entrada, resultados esperados, y un anexo con la formalización matemática del modelo. Con todo ello, se dispone de una comprensión integral del "problema del instituto" que servirá de base para desarrollar e implementar la herramienta Smartiming u otra solución de optimización de horarios en este entorno educativo.
